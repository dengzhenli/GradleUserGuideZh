 无标题 <style id="wiz_custom_css">html, .wiz-editor-body {font-size: 12pt;}.wiz-editor-body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.7;margin: 0 auto;position:relative;padding: 20px 16px;}.wiz-editor-body h1,.wiz-editor-body h2,.wiz-editor-body h3,.wiz-editor-body h4,.wiz-editor-body h5,.wiz-editor-body h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}.wiz-editor-body h1 {font-size:20pt;font-size:1.67rem;}.wiz-editor-body h2 {font-size:18pt;font-size:1.5rem;}.wiz-editor-body h3 {font-size:15pt;font-size:1.25rem;}.wiz-editor-body h4 {font-size:14pt;font-size:1.17rem;}.wiz-editor-body h5 {font-size:12pt;font-size:1rem;}.wiz-editor-body h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}.wiz-editor-body div,.wiz-editor-body p,.wiz-editor-body ul,.wiz-editor-body ol,.wiz-editor-body dl,.wiz-editor-body li {margin:8px 0 0;}.wiz-editor-body blockquote,.wiz-editor-body table,.wiz-editor-body pre,.wiz-editor-body code {margin:8px 0;}.wiz-editor-body .CodeMirror pre {margin:0;}.wiz-editor-body a {word-wrap: break-word;text-decoration-skip-ink: none;}.wiz-editor-body ul,.wiz-editor-body ol {padding-left:32px;padding-left:2rem;}.wiz-editor-body ol.wiz-list-level1 > li {list-style-type:decimal;}.wiz-editor-body ol.wiz-list-level2 > li {list-style-type:lower-latin;}.wiz-editor-body ol.wiz-list-level3 > li {list-style-type:lower-roman;}.wiz-editor-body li.wiz-list-align-style {list-style-position: inside; margin-left: -1em;}.wiz-editor-body blockquote {padding: 0 12px;}.wiz-editor-body blockquote > :first-child {margin-top:0;}.wiz-editor-body blockquote > :last-child {margin-bottom:0;}.wiz-editor-body img {border:0;max-width:100%;height:auto !important;margin:2px 0;padding: 2px;vertical-align:bottom;}.wiz-editor-body table {border-collapse:collapse;border:1px solid #a7afbc;}.wiz-editor-body td,.wiz-editor-body th {padding:4px 8px;border-collapse:collapse;border:1px solid #a7afbc;min-height:28px;word-break:break-word;box-sizing: border-box;}.wiz-editor-body td > div:first-child {margin-top:0;}.wiz-editor-body td > div:last-child {margin-bottom:0;}.wiz-editor-body img.wiz-svg-image {box-shadow:1px 1px 4px #E8E8E8;}.wiz-editor-body .wiz-image-container {margin:0;max-width: 100%;display: inline-flex;flex-direction: column;}.wiz-editor-body .wiz-image-container .wiz-image-title {display:inline-block;text-align: center;color: #a7afbc;line-height: 18px;font-size: 12px;min-height: 18px;width: 100%;white-space: normal;}.wiz-hide {display:none !important;}.wiz-editor-body.wiz-editor-outline {padding-right:0; padding-left:0;}.wiz-editor-body.wiz-editor-outline .outline-container {margin:0; padding:0; line-height:1.5;}.wiz-editor-body.wiz-editor-outline .outline-container div {margin:0;}.wiz-editor-body.wiz-editor-outline .node {margin:0; padding: 0;}.wiz-editor-body.wiz-editor-outline .outline-container > .node {margin-right:24px; margin-left:30px;}.wiz-editor-body.wiz-editor-outline .node.collapsed .children {display:none;}.wiz-editor-body.wiz-editor-outline .node .row {position:relative; padding-left:26px;}.wiz-editor-body.wiz-editor-outline .node .operator-container {width:36px;position:absolute; top:4px; left:-18px;}.wiz-editor-body.wiz-editor-outline .node .operator-bar {position:absolute; top:0; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center;}.wiz-editor-body.wiz-editor-outline .node .switch {width:18px; height:18px;display:flex;flex-direction: column;align-items: center;overflow: hidden;}.wiz-editor-body.wiz-editor-outline .node .switch i {font-size:20px;position:relative;left:-1px;top:-1px;}.wiz-editor-body.wiz-editor-outline .node .switch.active {cursor:pointer;color:transparent; transition:transform 200ms ease 0s;}.wiz-editor-body.wiz-editor-outline .node.collapsed .switch.active {transform:rotateZ(-90deg);}.wiz-editor-body.wiz-editor-outline .node .row:hover .switch.active {color:#505F79}.wiz-editor-body.wiz-editor-outline .node .dot {display:flex; align-items:center; justify-content:center; border-radius:100%; width:18px; height:18px;}.wiz-editor-body.wiz-editor-outline .node.collapsed .dot {background-color:rgba(80, 95, 121, .15);}.wiz-editor-body.wiz-editor-outline .node .dot-icon {background-color:#505F79; border-radius:100%; width:6px; height:6px;}.wiz-editor-body.wiz-editor-outline .node .child {margin-left:8px; border-left:1px solid #E6E9ED; padding-left:17px;}.wiz-editor-body.wiz-editor-outline .node .content {flex:1;outline:none; padding:4px 0;}.wiz-editor-body.wiz-editor-outline .node div.content {font-size:1rem;}.wiz-editor-body.wiz-editor-outline .node.complete > .row .content {text-decoration:line-through;color:#A7AFBC;}.wiz-editor-body.wiz-editor-outline .node .notes {outline:none; font-size:.8rem; color:#A7AFBC;}.wiz-editor-body.wiz-editor-outline .node .image {outline:none; padding-top:4px; padding-bottom:4px;}.wiz-editor-body.wiz-editor-outline .outline-container h1,.wiz-editor-body.wiz-editor-outline .outline-container h2,.wiz-editor-body.wiz-editor-outline .outline-container h3,.wiz-editor-body.wiz-editor-outline .outline-container h4,.wiz-editor-body.wiz-editor-outline .outline-container h5,.wiz-editor-body.wiz-editor-outline .outline-container h6 {margin:0;}body, .wiz-editor-body { padding-left: 48px; padding-right: 48px;}</style><style id="wiz_code_style">.wiz-editor-body .wiz-code-container{position: relative; padding:8px 0; margin: 5px 0;text-indent:0; text-align:left;}.CodeMirror {font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace; color: black; font-size: 10.5pt; font-size: 0.875rem}.wiz-editor-body .wiz-code-container .CodeMirror div {margin-top: 0; margin-bottom: 0;}.CodeMirror-lines {padding: 4px 0;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {padding: 0 4px;}.CodeMirror pre.CodeMirror-line {min-height: 24px;}.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {background-color: white;}.CodeMirror-gutters {border-right: 1px solid #ddd; background-color: #f7f7f7; white-space: nowrap;}.CodeMirror-linenumbers {}.CodeMirror-linenumber {padding: 0 3px 0 5px; min-width: 20px; text-align: right; color: #999; white-space: nowrap;}.CodeMirror-guttermarker {color: black;}.CodeMirror-guttermarker-subtle {color: #999;}.CodeMirror-cursor {border-left: 1px solid black; border-right: none; width: 0;}.CodeMirror div.CodeMirror-secondarycursor {border-left: 1px solid silver;}.cm-fat-cursor .CodeMirror-cursor {width: auto; border: 0 !important; background: #7e7;}.cm-fat-cursor div.CodeMirror-cursors {z-index: 1;}.cm-fat-cursor-mark {background-color: rgba(20, 255, 20, 0.5);-webkit-animation: blink 1.06s steps(1) infinite;-moz-animation: blink 1.06s steps(1) infinite;animation: blink 1.06s steps(1) infinite;}.cm-animate-fat-cursor {width: auto; border: 0; -webkit-animation: blink 1.06s steps(1) infinite; -moz-animation: blink 1.06s steps(1) infinite; animation: blink 1.06s steps(1) infinite; background-color: #7e7;}@-moz-keyframes blink { 0% {} 50% { background-color: transparent; } 100% {}}@-webkit-keyframes blink { 0% {} 50% { background-color: transparent; } 100% {}}@keyframes blink { 0% {} 50% { background-color: transparent; } 100% {}}.CodeMirror-overwrite .CodeMirror-cursor {}.cm-tab { display: inline-block; text-decoration: inherit; }.CodeMirror-rulers {position: absolute; left: 0; right: 0; top: -50px; bottom: -20px; overflow: hidden;}.CodeMirror-ruler {border-left: 1px solid #ccc; top: 0; bottom: 0; position: absolute;}.cm-s-default .cm-header {color: blue;}.cm-s-default .cm-quote {color: #090;}.cm-negative {color: #d44;}.cm-positive {color: #292;}.cm-header, .cm-strong {font-weight: bold;}.cm-em {font-style: italic;}.cm-link {text-decoration: underline;}.cm-strikethrough {text-decoration: line-through;}.cm-s-default .cm-keyword {color: #708;}.cm-s-default .cm-atom {color: #219;}.cm-s-default .cm-number {color: #164;}.cm-s-default .cm-def {color: #00f;}.cm-s-default .cm-variable,.cm-s-default .cm-punctuation,.cm-s-default .cm-property,.cm-s-default .cm-operator {}.cm-s-default .cm-variable-2 {color: #05a;}.cm-s-default .cm-variable-3 {color: #085;}.cm-s-default .cm-comment {color: #a50;}.cm-s-default .cm-string {color: #a11;}.cm-s-default .cm-string-2 {color: #f50;}.cm-s-default .cm-meta {color: #555;}.cm-s-default .cm-qualifier {color: #555;}.cm-s-default .cm-builtin {color: #30a;}.cm-s-default .cm-bracket {color: #997;}.cm-s-default .cm-tag {color: #170;}.cm-s-default .cm-attribute {color: #00c;}.cm-s-default .cm-hr {color: #999;}.cm-s-default .cm-link {color: #00c;}.cm-s-default .cm-error {color: #f00;}.cm-invalidchar {color: #f00;}.CodeMirror-composing { border-bottom: 2px solid; }div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }.CodeMirror-activeline-background {background: #e8f2ff;}.CodeMirror {position: relative; background: #f5f5f5;}.CodeMirror-scroll {overflow: hidden !important; margin-bottom: 0; margin-right: -30px; padding: 16px 30px 16px 0; outline: none; position: relative;}.CodeMirror-sizer {position: relative; border-right: 30px solid transparent;}.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {position: absolute; z-index: 6; display: none;}.CodeMirror-vscrollbar {right: 0; top: 0; overflow-x: hidden; overflow-y: scroll;}.CodeMirror-hscrollbar {bottom: 0; left: 0 !important; overflow-y: hidden; overflow-x: scroll;pointer-events: auto !important;outline: none;}.CodeMirror-scrollbar-filler {right: 0; bottom: 0;}.CodeMirror-gutter-filler {left: 0; bottom: 0;}.CodeMirror-gutters {position: absolute; left: 0; top: 0; min-height: 100%; z-index: 3;}.CodeMirror-gutter {white-space: normal; height: 100%; display: inline-block; vertical-align: top; margin-bottom: -30px;}.CodeMirror-gutter-wrapper {position: absolute; z-index: 4; background: none !important; border: none !important;}.CodeMirror-gutter-background {position: absolute; top: 0; bottom: 0; z-index: 4;}.CodeMirror-gutter-elt {position: absolute; cursor: default; z-index: 4;}.CodeMirror-gutter-wrapper ::selection { background-color: transparent }.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }.CodeMirror-lines {cursor: text; min-height: 1px;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {-moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; border-width: 0; background: transparent; font-family: inherit; font-size: inherit; margin: 0; white-space: pre; word-wrap: normal; line-height: inherit; color: inherit; z-index: 2; position: relative; overflow: visible; -webkit-tap-highlight-color: transparent; -webkit-font-variant-ligatures: contextual; font-variant-ligatures: contextual;}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like {word-wrap: break-word; white-space: pre-wrap; word-break: normal;}.CodeMirror-linebackground {position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: 0;}.CodeMirror-linewidget {position: relative; z-index: 2; padding: 0.1px;}.CodeMirror-widget {}.CodeMirror-rtl pre { direction: rtl; }.CodeMirror-code {outline: none;}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber {-moz-box-sizing: content-box; box-sizing: content-box;}.CodeMirror-measure {position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;}.CodeMirror-cursor {position: absolute; pointer-events: none;}.CodeMirror-measure pre { position: static; }div.CodeMirror-cursors {visibility: hidden; position: relative; z-index: 3;}div.CodeMirror-dragcursors {visibility: visible;}.CodeMirror-focused div.CodeMirror-cursors {visibility: visible;}.CodeMirror-selected { background: #d9d9d9; }.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }.CodeMirror-crosshair { cursor: crosshair; }.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }.cm-searching {background: #ffa; background: rgba(255, 255, 0, .4);}.cm-force-border { padding-right: .1px; }@media print { .CodeMirror div.CodeMirror-cursors {visibility: hidden;}}.cm-tab-wrap-hack:after { content: ""; }span.CodeMirror-selectedtext { background: none; }.CodeMirror-activeline-background, .CodeMirror-selected {transition: visibility 0ms 100ms;}.CodeMirror-blur .CodeMirror-activeline-background, .CodeMirror-blur .CodeMirror-selected {visibility:hidden;}.CodeMirror-blur .CodeMirror-matchingbracket {color:inherit !important;outline:none !important;text-decoration:none !important;}.CodeMirror-sizer {min-height:auto !important;}</style>

# 查看和调试依赖项

内容

* [构建扫描](#sec:debugging-build-scans)
* [列出项目中的依赖项](#sec:listing_dependencies)
* [识别选择了哪个依赖版本以及为什么](#sec:identifying_reason_dependency_selection)
* [解决版本冲突](#sec:resolving-version-conflict)
* [解决变量选择错误](#sec:resolving-variant-aware-errors)
* [解决不安全的配置解析错误](#sub:resolving-unsafe-configuration-resolution-errors)

Gradle提供了足够的工具来导航较大的依赖图并缓解可能导致[依赖地狱的情况](https://en.wikipedia.org/wiki/Dependency_hell)。用户可以选择呈现完整的依赖关系图，还可以确定依赖的选择原因和来源。依赖性的来源可以是构建脚本中已声明的依赖性，也可以是图形中的传递性依赖性及其相应的配置。Gradle通过构建扫描的可视化表示和命令行工具提供了两种功能。

## [](#sec:debugging-build-scans)[构建扫描](#sec:debugging-build-scans)

<table style="background:none;width:912px;"><tbody><tr><td class="icon" style="color:rgba(0, 0, 0, 0.8);width:80px;"><i class="fa icon-note"></i></td><td class="content" style="font-size:1.0625rem;color:rgba(0, 0, 0, 0.6);"><div class="paragraph"><p style="font-size: 1rem;"><font><font>如果您不知道什么是</font></font><a href="https://scans.gradle.com/" style="color:rgb(29, 162, 189);text-decoration:none;"><font><font>构建扫描</font></font></a><font><font>，请确保将其签出！</font></font></p></div></td></tr></tbody></table>

构建扫描可以将依赖项可视化为可导航的可搜索树。通过单击图形中的特定依赖项，可以呈现其他上下文信息。

图1.构建扫描中的依赖树

## [](#sec:listing_dependencies)[列出项目中的依赖项](#sec:listing_dependencies)

Gradle可以可视化项目中每个可用[配置]()的整个依赖树。

如果您想确定在运行时已解决了哪些依赖关系，则呈现依赖关系树特别有用。它还为您提供有关该过程中发生的任何依赖项冲突解决方案的信息，并清楚地指示所选版本。依赖性报告始终包含已声明和可传递的依赖性。

<table style="background:none;width:912px;"><tbody><tr><td class="icon" style="color:rgba(0, 0, 0, 0.8);width:80px;"><i class="fa icon-note"></i></td><td class="content" style="font-size:1.0625rem;color:rgba(0, 0, 0, 0.6);"><div class="paragraph"><p style="font-size: 1rem;"><font><font>该</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">dependencies</code><font><font>任务将仅在</font></font><em style="font-style:italic;"><font><font>单个</font></font></em><font><font>项目</font><font>上执行</font><font>。</font><font>如果您在根项目上运行任务，它将显示根项目而不是任何子项目的依赖项。</font><font>确保</font><font>在运行时</font><font>始终以</font></font><a href="" style="color:rgb(29, 162, 189);text-decoration:none;"><font><font>正确的项目</font></font></a><font><font>为目标</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">dependencies</code><font><font>。</font></font></p></div></td></tr></tbody></table>

假设您要为使用[JGit库](https://www.eclipse.org/jgit/)执行SCM操作（例如，为发布过程建模）的项目创建任务。您可以在[自定义配置]()的帮助下声明任何外部工具的依赖关系，这样它就不会污染其他上下文，例如生产源代码的编译类路径。

每个Gradle项目都提供从命令行`dependencies`渲染所谓的_依赖项报告_的任务。默认情况下，相关性报告会呈现所有配置的相关性。要专注于有关一种配置的信息，请提供可选参数`--configuration`。

例如，要显示Java项目中测试运行时类路径上的依赖关系，请运行：

gradle -q依赖项-配置testRuntimeClasspath

<table style="background:none;width:912px;"><tbody><tr><td class="icon" style="color:rgba(0, 0, 0, 0.8);width:80px;"><i class="fa icon-tip"></i></td><td class="content" style="font-size:1.0625rem;color:rgba(0, 0, 0, 0.6);"><font><font>要查看该</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">java</code><font><font>插件</font><font>添加的所有预定义配置的列表</font><font>，请参阅</font></font><a href="" style="color:rgb(29, 162, 189);text-decoration:none;"><font><font>Java插件的文档</font></font></a><font><font>。</font></font></td></tr></tbody></table>

示例1.使用自定义配置声明JGit依赖项

`Groovy``Kotlin`

build.gradle

repositories \{ jcenter\(\) \} configurations \{ scm \} dependencies \{ scm 'org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r' \}

 

1

repositories \{

2

 jcenter\(\)

3

\}

4

5

configurations \{

6

 scm

7

\}

8

9

dependencies \{

10

 scm 'org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r'

11

\}

### [](#example_rendering_the_dependency_report_for_a_custom_configuration)[示例：呈现自定义配置的依赖性报告](#example_rendering_the_dependency_report_for_a_custom_configuration)

输出**`gradle -q dependencies --configuration scm`**

\> gradle -q依赖项--configuration scm
 -------------------------------------------------- ---------- 根项目 -------------------------------------------------- ----------
 平方厘米 \\ --- org.eclipse.jgit：org.eclipse.jgit：4.9.2.201712150930-r + --- com.jcraft：jsch：0.1.54 + --- com.googlecode.javaewah：JavaEWAH：1.1.6 + --- org.apache.httpcomponents：httpclient：4.3.6 | \+ --- org.apache.httpcomponents：httpcore：4.3.3 | \+ --- commons-logging：commons-logging：1.1.3 | \\ --- commons编解码器：commons编解码器：1.6 \\ --- org.slf4j：slf4j-api：1.7.2
 通过添加--scan选项，可以使用基于Web的可搜索依赖项报告。

依赖性报告提供了有关图形中可用依赖性的详细信息。任何无法解决的依赖项都`FAILED`以红色标记。图表中可能多次出现的具有相同坐标的依赖项被省略，并用星号表示。必须进行冲突解决的依赖项会以右箭头字符分隔请求和选定的版本。

## [](#sec:identifying_reason_dependency_selection)[识别选择了哪个依赖版本以及为什么](#sec:identifying_reason_dependency_selection)

大型软件项目不可避免地会通过直接或传递依赖关系来处理越来越多的依赖关系。该[依赖性报告](#sec:listing_dependencies)为您提供具有相关性的原始名单，但并没有解释_为什么_它们已经被选择或者_其_依赖性负责拉他们到图形。

让我们看一个具体的例子。一个项目可以请求相同依赖关系的两个不同版本，无论是直接依赖关系还是传递依赖关系。Gradle应用[版本冲突解决方案]()来确保依赖关系图中仅存在一个版本的依赖关系。在此示例中，冲突的依赖关系由表示`commons-codec:commons-codec`。

例子2.声明JGit依赖和冲突的依赖

`Groovy``Kotlin`

build.gradle

repositories \{ jcenter\(\) \} configurations \{ scm \} dependencies \{ scm 'org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r' scm 'commons-codec:commons-codec:1.7' \}

 

1

repositories \{

2

 jcenter\(\)

3

\}

4

5

configurations \{

6

 scm

7

\}

8

9

dependencies \{

10

 scm 'org.eclipse.jgit:org.eclipse.jgit:4.9.2.201712150930-r'

11

 scm 'commons-codec:commons-codec:1.7'

12

\}

如果单击依赖项并选择“ Required By”选项卡，则[构建扫描中](https://scans.gradle.com/)的依赖项树将呈现选择原因（冲突解决）以及依赖项的来源。

图2.构建扫描中的依赖关系洞察能力

每个Gradle项目都提供了从命令行`dependencyInsight`呈现所谓的_依赖关系洞察报告_的任务。给定依赖关系图中的依赖关系，您可以识别选择原因并跟踪依赖关系选择的来源。您可以将依赖关系洞察报告视为给定依赖关系的依赖关系报告的逆表示。

该任务采用以下参数：

`--dependency <dependency>`（必填）

指示要关注的依赖项。它可以是完整的`group:name`或一部分。如果多个依赖项匹配，它们都将打印在报告中。

`--configuration <name>`（必填）

指示要解决的用于显示依赖性信息的配置。请注意，[Java插件将]()一个约定与value绑定在一起`compileClasspath`，使该参数成为可选参数。

`--singlepath`（可选的）

指示仅呈现到依赖项的单个路径。这对于缩小大图中的输出可能很有用。

<table style="background:none;width:912px;"><tbody><tr><td class="icon" style="color:rgba(0, 0, 0, 0.8);width:80px;"><i class="fa icon-note"></i></td><td class="content" style="font-size:1.0625rem;color:rgba(0, 0, 0, 0.6);"><div class="paragraph"><p style="font-size: 1rem;"><font><font>该</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">dependencyInsight</code><font><font>任务将仅在</font></font><em style="font-style:italic;"><font><font>单个</font></font></em><font><font>项目</font><font>上执行</font><font>。</font><font>如果在根项目上运行任务，它将显示根项目而不是任何子项目的依赖项信息。</font><font>确保</font><font>在运行时</font><font>始终以</font></font><a href="" style="color:rgb(29, 162, 189);text-decoration:none;"><font><font>正确的项目</font></font></a><font><font>为目标</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">dependencyInsight</code><font><font>。</font></font></p></div></td></tr></tbody></table>

### [](#example_using_the_dependency_insight_report_for_a_given_dependency)[示例：对给定依赖项使用依赖关系洞察报告](#example_using_the_dependency_insight_report_for_a_given_dependency)

输出**`gradle -q dependencyInsight --dependency commons-codec --configuration scm`**

\> gradle -qdependencyInsight --dependency commons编解码器--configuration scm commons-codec：commons-codec：1.7 变体“默认” \[ org.gradle.status =发布（不要求） \] 选择理由： -通过冲突解决：在1.7和1.6版本之间
 commons-codec：commons-codec：1.7 \\-平方厘米
 commons-codec：commons-codec：1.6-> 1.7 \\ --- org.apache.httpcomponents：httpclient：4.3.6 \\ --- org.eclipse.jgit：org.eclipse.jgit：4.9.2.201712150930-r \\-平方厘米
 通过添加--scan选项，可以使用基于Web的可搜索依赖项报告。

如上所述，`--configuration`在不是Java项目的项目中省略该参数将导致错误：

\>由于未指定输入配置，因此无法生成依赖性洞察报告。 可以从命令行指定，例如：'：dependencyInsight --configuration someConf --dependency someDep'

有关配置的更多信息，请参阅有关声明依赖项的文档，该文档描述了[什么是依赖项配置]()。

### [](#understanding_selection_reasons)[了解选择原因](#understanding_selection_reasons)

依赖关系洞察报告的“选择原因”部分将列出有关为什么选择依赖关系的不同原因。请查看下表，以了解所用不同术语的含义：

表1.选择原因术语
| 原因 | 含义 |
| --- | --- |
| 
（缺席）

 | 

这意味着除了引用（直接或传递）外，没有其他原因

 |
| 

要求：\<文本>

 | 

依存关系出现在图形中，并且包含项带有[`because`文本]()。

 |
| 

要求：与版本\<versions>不匹配

 | 

该依赖关系将显示在图形中，并带有[动态版本]()，其中不包括列出的版本。这之后也可以是`because`文本。

 |
| 

要求：拒绝版本\<versions>

 | 

依赖关系显示在图中，其中包含一个或多个[丰富版本]()`reject`。这之后也可以是`because`文本。

 |
| 

通过冲突解决：版本之间\<version>

 | 

依赖关系在图中出现了多次，具有不同的版本请求。这样可以[解决冲突，]()从而选择最合适的版本。

 |
| 

受约束

 | 

一个[依赖约束]()参加了版本选择。这之后也可以是`because`文本。

 |
| 

由祖先

 | 

图中有一个带有的[丰富版本]()，`strictly`用于强制执行此依赖项的版本。

 |
| 

按规则选择

 | 

一个[依赖解决规则]()推翻默认选择过程。这之后也可以是`because`文本。

 |
| 

拒绝：根据规则，\<版本>，因为\<文本>

 | 

一个`ComponentSelection.reject`[拒绝给定版本]()的依赖

 |
| 

拒绝：版本\<版本>：\<属性信息>

 | 

依赖项具有动态版本，并且某些版本与[请求的属性]()不匹配。

 |
| 

被迫

 | 

该构建会[强制执行]()依赖项的版本。

 |

请注意，如果图形中存在多个选择原因，则将全部列出。

## [](#sec:resolving-version-conflict)[解决版本冲突](#sec:resolving-version-conflict)

如果所选版本与您的期望不符，则Gradle提供了一系列工具来帮助您[控制传递依赖]()。

## [](#sec:resolving-variant-aware-errors)[解决变量选择错误](#sec:resolving-variant-aware-errors)

有时会在[变体选择级别上]()发生选择错误。请查看[专用部分]()以了解这些错误以及如何解决它们。

## [](#sub:resolving-unsafe-configuration-resolution-errors)[解决不安全的配置解析错误](#sub:resolving-unsafe-configuration-resolution-errors)

跨项目边界时，必须安全地解决配置问题，因为解决配置问题会对Gradle的项目模型产生副作用。Gradle可以管理此安全访问，但是需要以使Gradle能够进行访问的方式来访问配置。有多种方法可以不安全地解决配置，并且Gradle会针对每个不安全的访问产生弃用警告。

例如：

* 一个项目中的任务直接解决另一个项目中的配置。
* 任务将另一个项目中的配置指定为输入文件集合。
* 一个项目的构建脚本在评估期间解析另一个项目中的配置。

如果您的构建具有不安全的访问弃用警告，则需要对其进行修复。这是这些不良做法的征兆，可能会导致奇怪且不确定的错误。

在大多数情况下，可以通过在另一个项目上创建跨项目的依赖关系来解决此问题。有关更多信息，请参见用于[在项目之间共享输出]()的文档。如果您发现使用这些技术无法解决的用例，请通过提交遵循我们的发行准则的[GitHub Issue](https://github.com/gradle/gradle/issues)来通知我们。