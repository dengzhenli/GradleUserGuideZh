

[ Gradle ](https://docs.gradle.org "Gradle Docs")

User Manual

  * Community Open Community Menu

[ Community Home ](https://gradle.org/)

[ Community Forums ](https://discuss.gradle.org/)

[ Community Plugins ](https://plugins.gradle.org)

  * [Training](https://gradle.com/training/)
  * News Open Community Menu

[ Newsletter ](https://newsletter.gradle.com)

[ Blog ](https://blog.gradle.org)

[ Twitter ](https://twitter.com/gradle)

  * [Enterprise](https://gradle.com)
  * [github](https://github.com/gradle/gradle "Gradle on GitHub")

  * [Docs Home](../userguide/userguide.html)
  * [Samples](../samples/index.html)
  * [Release Notes](../release-notes.html)
  * Gradle API
    * [Javadoc](../javadoc/index.html?overview-summary.html)
    * [Groovy DSL Reference](../dsl/index.html)
    * [Groovy DSL Primer](../userguide/groovy_build_script_primer.html)
    * [Kotlin DSL API](https://gradle.github.io/kotlin-dsl-docs/api/)
    * [Kotlin DSL Primer](../userguide/kotlin_dsl.html)

### User Manual

[ PDF ](../userguide/userguide.pdf)

  * [What is Gradle?](../userguide/what_is_gradle.html)
  * [Getting Started](../userguide/getting_started.html)
  * [Installing Gradle](../userguide/installation.html)
  * Upgrading Gradle...
    * [version 6.X to latest](../userguide/upgrading_version_6.html)
    * [version 5.X to 6.0](../userguide/upgrading_version_5.html)
    * [version 4.X to 5.0](../userguide/upgrading_version_4.html)
    * [Gradle's Feature Lifecycle](../userguide/feature_lifecycle.html)
  * Migrating to Gradle...
    * [from Maven](../userguide/migrating_from_maven.html)
    * [from Ant](../userguide/migrating_from_ant.html)
  * [Compatibility Notes](../userguide/compatibility.html)
  * [Troubleshooting Builds](../userguide/troubleshooting.html)

### Running Gradle Builds

  * Customizing Execution
    * [Configuring the Build Environment](../userguide/build_environment.html)
    * [Configuring the Gradle Daemon](../userguide/gradle_daemon.html)
    * [Using Initialization Scripts](../userguide/init_scripts.html)
  * [Executing Multi-Project Builds](../userguide/intro_multi_project_builds.html)
  * [Inspecting Gradle Builds](https://scans.gradle.com/)
  * Optimizing Build Times
    * [Build Performance Guide](https://guides.gradle.org/performance/)
    * [Enabling and Configuring the Build Cache](../userguide/build_cache.html)
    * [Using the Configuration Cache](../userguide/configuration_cache.html)

### Authoring Gradle Builds

  * Learning the Basics
    * [Introducing the Basics of Build Scripts](../userguide/tutorial_using_tasks.html)
    * [Working with Tasks](../userguide/more_about_tasks.html)
    * [Learning More About Build Scripts](../userguide/writing_build_scripts.html)
    * [Working with Files](../userguide/working_with_files.html)
    * [Using Gradle Plugins](../userguide/plugins.html)
    * [Understanding the Build Lifecycle](../userguide/build_lifecycle.html)
    * [Working with Logging](../userguide/logging.html)
    * [Avoiding Traps](../userguide/potential_traps.html)
  * Authoring Multi-Project Builds
    * [Creating a Basic Multi-Project Build](../userguide/multi_project_builds.html)
    * [Declaring Dependencies between Subprojects](../userguide/declaring_dependencies_between_subprojects.html)
    * [Sharing Build Logic between Subprojects](../userguide/sharing_build_logic_between_subprojects.html)
    * [Fine Tuning the Project Layout](../userguide/fine_tuning_project_layout.html)
    * [Understanding Configuration and Execution](../userguide/multi_project_configuration_and_execution.html)
  * Authoring Sustainable Builds
    * [Organizing Build Logic](../userguide/organizing_gradle_projects.html)
    * [Following Best Practices](../userguide/authoring_maintainable_build_scripts.html)
  * Advanced Techniques
    * [Developing Parallel Tasks](https://guides.gradle.org/using-the-worker-api/)
    * [Testing a Build with TestKit](../userguide/test_kit.html)
    * [Using Ant from Gradle](../userguide/ant.html)

### Authoring JVM Builds

  * [Building Java & JVM projects](../userguide/building_java_projects.html)
  * [Testing Java & JVM projects](../userguide/java_testing.html)
  * [Toolchains for Java projects](../userguide/toolchains.html)
  * [Managing Dependencies](../userguide/dependency_management_for_java_projects.html)
  * JVM Plugins
    * [Java Library Plugin](../userguide/java_library_plugin.html)
    * [Java Application Plugin](../userguide/application_plugin.html)
    * [Java Platform Plugin](../userguide/java_platform_plugin.html)
    * [Groovy Plugin](../userguide/groovy_plugin.html)
    * [Scala Plugin](../userguide/scala_plugin.html)

### Authoring C++/Swift Builds

  * [Building C++ projects](../userguide/building_cpp_projects.html)
  * [Testing C++ projects](../userguide/cpp_testing.html)
  * [Building Swift projects](../userguide/building_swift_projects.html)
  * [Testing Swift projects](../userguide/swift_testing.html)

### Working with Dependencies

  * Learning the Basics
    * [What is Dependency Management?](../userguide/core_dependency_management.html)
    * [Declaring Repositories](../userguide/declaring_repositories.html)
    * [Declaring Dependencies](../userguide/declaring_dependencies.html)
    * [Understanding Library and Application Differences](../userguide/library_vs_application.html)
    * [Viewing and Debugging Dependencies](../userguide/viewing_debugging_dependencies.html)
    * [Understanding Resolution](../userguide/dependency_resolution.html)
    * [Verifying dependencies](../userguide/dependency_verification.html)
  * Declaring Versions
    * [Declaring Versions and Ranges](../userguide/single_versions.html)
    * [Declaring Rich Versions](../userguide/rich_versions.html)
    * [Handling Changing Versions](../userguide/dynamic_versions.html)
    * [Locking Versions](../userguide/dependency_locking.html)
  * Controlling Transitives
    * [Upgrading Versions](../userguide/dependency_constraints.html)
    * [Downgrading and Excluding](../userguide/dependency_downgrade_and_exclude.html)
    * [Sharing Versions](../userguide/platforms.html)
    * [Aligning Dependencies](../userguide/dependency_version_alignment.html)
    * [Handling Mutually Exclusive Dependencies](../userguide/dependency_capability_conflict.html)
    * [Fixing Metadata](../userguide/component_metadata_rules.html)
    * [Customizing Resolution](../userguide/resolution_rules.html)
    * [Preventing accidental upgrades](../userguide/resolution_strategy_tuning.html)
  * Producing and Consuming Variants of Libraries
    * [Declaring Capabilities of a Library](../userguide/component_capabilities.html)
    * [Modeling Feature Variants and Optional Dependencies](../userguide/feature_variants.html)
    * [Understanding Variant Selection](../userguide/variant_model.html)
    * [Declaring Variant Attributes](../userguide/variant_attributes.html)
    * [Sharing Outputs of Projects](../userguide/cross_project_publications.html)
    * [Transforming Artifacts](../userguide/artifact_transforms.html)
  * Working in a Multi-repo Environment
    * [Composing Builds](../userguide/composite_builds.html)
  * Publishing Libraries
    * [Setting up Publishing](../userguide/publishing_setup.html)
    * [Understanding Gradle Module Metadata](../userguide/publishing_gradle_module_metadata.html)
    * [Signing Artifacts](../userguide/publishing_signing.html)
    * [Customizing Publishing](../userguide/publishing_customization.html)
    * [Maven Publish Plugin](../userguide/publishing_maven.html)
    * [Ivy Publish Plugin](../userguide/publishing_ivy.html)
  * [Terminology](../userguide/dependency_management_terminology.html)

### Extending Gradle

  * [Plugin Development Tutorials](https://gradle.org/guides/?q=Plugin%20Development)
  * [Writing Gradle Task Types](../userguide/custom_tasks.html)
  * [Writing Gradle Plugins](../userguide/custom_plugins.html)
  * [Writing Custom Gradle Types](../userguide/custom_gradle_types.html)
  * [Configuring Tasks Lazily](../userguide/lazy_configuration.html)
  * [Using Task Configuration Avoidance](../userguide/task_configuration_avoidance.html)

### Reference

  * [Core Plugins](../userguide/plugin_reference.html)
  * [Command-Line Interface](../userguide/command_line_interface.html)
  * [Gradle & Third-party Tools](../userguide/third_party_integration.html)
  * [The Gradle Wrapper](../userguide/gradle_wrapper.html)
  * [Gradle-managed Directories](../userguide/directory_layout.html)

# Executing Multi-Project Builds

version 6.7.1

Contents

  * Identifying project structure
  * Executing tasks by name
  * Executing tasks by fully qualified name
  * Multi-Project Building and Testing

Only the smallest of projects has a single build file and source tree, unless
it happens to be a massive, monolithic application. It’s often much easier to
digest and understand a project that has been split into smaller, inter-
dependent modules. The word “inter-dependent” is important, though, and is why
you typically want to link the modules together through a single build.

Gradle supports this scenario through _multi-project_ builds.

For details about authoring _multi-project_ builds, consult the [Authoring
Multi-Project Builds section of the user
manual](multi_project_builds.html#multi_project_builds).

## Identifying project structure

To identify the project structure, you can use `gradle projects` command. As
an example, let's use a multi-project build with the following structure:

    
    
    > gradle -q projects
    
    ------------------------------------------------------------
    Root project
    ------------------------------------------------------------
    
    Root project 'multiproject'
    +--- Project ':api'
    +--- Project ':services'
    |    +--- Project ':services:shared'
    |    \--- Project ':services:webservice'
    \--- Project ':shared'
    
    To see a list of the tasks of a project, run gradle <project-path>:tasks
    For example, try running gradle :api:tasks

From a user's perspective, multi-project builds are still collections of tasks
you can run. The difference is that you may want to control _which_ project's
tasks get executed. The following sections will cover the two options you have
for executing tasks in a multi-project build.

## Executing tasks by name

The command `gradle test` will execute the `test` task in any subprojects,
relative to the current working directory, that have that task. If you run the
command from the root project directory, you'll run `test` in _api_ , _shared_
, _services:shared_ and _services:webservice_. If you run the command from the
_services_ project directory, you'll only execute the task in
_services:shared_ and _services:webservice_.

The basic rule behind Gradle's behavior is: execute all tasks down the
hierarchy which have this name. Only complain if there is _no_ such task found
in any of the subprojects traversed.

Gradle looks down the hierarchy, starting with the _current dir_ , for tasks
with the given name and executes them. One thing is very important to note.
Gradle _always_ evaluates _every_ project of the multi-project build and
creates all existing task objects. Then, according to the task name arguments
and the current directory, Gradle filters the tasks which should be executed.
Because of Gradle's [cross project
configuration](sharing_build_logic_between_subprojects.html#sec:convention_plugins_vs_cross_configuration),
_every_ project has to be evaluated before _any_ task gets executed.

When you're using the Gradle wrapper, executing a task for a specific
subproject by running Gradle from the subproject's directory doesn't work well
because you have to specify the path to the wrapper script if you're not in
the project root. For example, if want to run `build` task for the
_webservice_ subproject and you're in the _webservice_ subproject directory,
you would have to run `../../gradlew build`. The next section shows how this
can be achieved directly from the project's root directory.

## Executing tasks by fully qualified name

You can use task's fully qualified name to execute a specific task in a
specific subproject. For example: `gradle :services:webservice:build` will run
the `build` task of the _webservice_ subproject. The fully qualified name of a
task is simply its project path plus the task name.

A project path has the following pattern: It starts with an optional colon,
which denotes the root project. The root project is the only project in a path
that is not specified by its name. The rest of a project path is a colon-
separated sequence of project names, where the next project is a subproject of
the previous project. You can see the project paths when running `gradle
projects` as shown in identifying project structure section.

This approach works for any task, so if you want to know what tasks are in a
particular subproject, just use the `tasks` task, e.g. `gradle
:services:webservice:tasks`.

Regardless of which technique you use to execute tasks, Gradle will take care
of building any subprojects that the target depends on. You don't have to
worry about the inter-project dependencies yourself. If you're interested in
how this is configured, you can read about writing multi-project builds [later
in the user manual](multi_project_builds.html#multi_project_builds).

That's all you really need to know about multi-project builds as a build user.
You can now identify whether a build is a multi-project one and you can
discover its structure. And finally, you can execute tasks within specific
subprojects.

## Multi-Project Building and Testing

The `build` task of the Java plugin is typically used to compile, test, and
perform code style checks (if the CodeQuality plugin is used) of a single
project. In multi-project builds you may often want to do all of these tasks
across a range of projects. The `buildNeeded` and `buildDependents` tasks can
help with this.

In [this
example](declaring_dependencies_between_subprojects.html#javadependencies_2),
the `:services:person-service` project depends on both the `:api` and
`:shared` projects. The `:api` project also depends on the `:shared` project.

Assume you are working on a single project, the `:api` project. You have been
making changes, but have not built the entire project since performing a
clean. You want to build any necessary supporting jars, but only perform code
quality and unit tests on the project you have changed. The `build` task does
this.

Example 1. Build and Test Single Project

Output of **`gradle :api:build`**

    
    
    > gradle :api:build
    > Task :shared:compileJava
    > Task :shared:processResources
    > Task :shared:classes
    > Task :shared:jar
    > Task :api:compileJava
    > Task :api:processResources
    > Task :api:classes
    > Task :api:jar
    > Task :api:assemble
    > Task :api:compileTestJava
    > Task :api:processTestResources
    > Task :api:testClasses
    > Task :api:test
    > Task :api:check
    > Task :api:build
    
    BUILD SUCCESSFUL in 0s
    9 actionable tasks: 9 executed

If you have just gotten the latest version of source from your version control
system which included changes in other projects that `:api` depends on, you
might want to not only build all the projects you depend on, but test them as
well. The `buildNeeded` task also tests all the projects from the project
dependencies of the testRuntime configuration.

Example 2. Build and Test Depended On Projects

Output of **`gradle :api:buildNeeded`**

    
    
    > gradle :api:buildNeeded
    > Task :shared:compileJava
    > Task :shared:processResources
    > Task :shared:classes
    > Task :shared:jar
    > Task :api:compileJava
    > Task :api:processResources
    > Task :api:classes
    > Task :api:jar
    > Task :api:assemble
    > Task :api:compileTestJava
    > Task :api:processTestResources
    > Task :api:testClasses
    > Task :api:test
    > Task :api:check
    > Task :api:build
    > Task :shared:assemble
    > Task :shared:compileTestJava
    > Task :shared:processTestResources
    > Task :shared:testClasses
    > Task :shared:test
    > Task :shared:check
    > Task :shared:build
    > Task :shared:buildNeeded
    > Task :api:buildNeeded
    
    BUILD SUCCESSFUL in 0s
    12 actionable tasks: 12 executed

You also might want to refactor some part of the `:api` project that is used
in other projects. If you make these types of changes, it is not sufficient to
test just the `:api` project, you also need to test all projects that depend
on the `:api` project. The `buildDependents` task also tests all the projects
that have a project dependency (in the testRuntime configuration) on the
specified project.

Example 3. Build and Test Dependent Projects

Output of **`gradle :api:buildDependents`**

    
    
    > gradle :api:buildDependents
    > Task :shared:compileJava
    > Task :shared:processResources
    > Task :shared:classes
    > Task :shared:jar
    > Task :api:compileJava
    > Task :api:processResources
    > Task :api:classes
    > Task :api:jar
    > Task :api:assemble
    > Task :api:compileTestJava
    > Task :api:processTestResources
    > Task :api:testClasses
    > Task :api:test
    > Task :api:check
    > Task :api:build
    > Task :services:person-service:compileJava
    > Task :services:person-service:processResources
    > Task :services:person-service:classes
    > Task :services:person-service:jar
    > Task :services:person-service:assemble
    > Task :services:person-service:compileTestJava
    > Task :services:person-service:processTestResources
    > Task :services:person-service:testClasses
    > Task :services:person-service:test
    > Task :services:person-service:check
    > Task :services:person-service:build
    > Task :services:person-service:buildDependents
    > Task :api:buildDependents
    
    BUILD SUCCESSFUL in 0s
    17 actionable tasks: 17 executed

Finally, you may want to build and test everything in all projects. Any task
you run in the root project folder will cause that same named task to be run
on all the children. So you can just run `gradle build` to build and test all
projects.

**Docs**

  * [User Manual](/userguide/userguide.html)
  * [DSL Reference](/dsl/)
  * [Release Notes](/release-notes.html)
  * [Javadoc](/javadoc/)

**News**

  * [Blog](https://blog.gradle.org/)
  * [Newsletter](https://newsletter.gradle.com/)
  * [Twitter](https://twitter.com/gradle)
  * [Status Page](https://status.gradle.com/)

**Products**

  * [Build Scans](https://gradle.com/build-scans/)
  * [Build Cache](https://gradle.com/build-cache/)
  * [Enterprise Docs](https://gradle.com/enterprise/resources/)

**Get Help**

  * [Forums](https://discuss.gradle.org/c/help-discuss)
  * [GitHub](https://github.com/gradle/)
  * [Training](https://gradle.com/training/)
  * [Services](https://gradle.org/services/)

##### Stay `UP-TO-DATE` on new features and news

By entering your email, you agree to our
[Terms](https://gradle.com/legal/terms-of-service/) and [Privacy
Policy](https://gradle.com/legal/privacy/), including receipt of emails. You
can unsubscribe at any time.

Subscribe

© [Gradle Inc.](https://gradle.com) 2020 All rights reserved.

[ gradle ](/)

[Careers](https://gradle.com/careers/) |
[Privacy](https://gradle.com/legal/privacy/) | [Terms of
Service](https://gradle.com/legal/terms-of-service/) |
[Contact](https://gradle.org/contact/)

