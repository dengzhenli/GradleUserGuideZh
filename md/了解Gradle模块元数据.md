

[ Gradle ](https://docs.gradle.org/ "Gradle Docs")

用户手册

  * 社区 Open Community Menu

[ 社区之家 ](https://gradle.org/)

[ 社区论坛 ](https://discuss.gradle.org/)

[ 社区插件 ](https://plugins.gradle.org/)

  * [训练](https://gradle.com/training/)
  * 新闻 Open Community Menu

[ 通讯 ](https://newsletter.gradle.com/)

[ 博客 ](https://blog.gradle.org/)

[ 推特 ](https://twitter.com/gradle)

  * [企业](https://gradle.com/)
  * [github](https://github.com/gradle/gradle "GitHub上的Gradle")

  * [文件首页](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/userguide.html)
  * [样品](file:///Users/dxs/temp/gradle-6.7.1/docs/samples/index.html)
  * [发行说明](file:///Users/dxs/temp/gradle-6.7.1/docs/release-notes.html)
  * [Gradle API](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#gradle-api)
    * [Java文档](file:///Users/dxs/temp/gradle-6.7.1/docs/javadoc/index.html?overview-summary.html)
    * [Groovy DSL参考](file:///Users/dxs/temp/gradle-6.7.1/docs/dsl/index.html)
    * [Groovy DSL入门](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/groovy_build_script_primer.html)
    * [Kotlin DSL API](https://gradle.github.io/kotlin-dsl-docs/api/)
    * [Kotlin DSL入门](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/kotlin_dsl.html)

### 用户手册

[ PDF格式 ](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/userguide.pdf)

  * [什么是Gradle？](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/what_is_gradle.html)
  * [入门](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/getting_started.html)
  * [安装Gradle](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/installation.html)
  * [升级Gradle ...](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#upgrading-gradle)
    * [版本6.X到最新](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/upgrading_version_6.html)
    * [版本5.X到6.0](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/upgrading_version_5.html)
    * [版本4.X到5.0](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/upgrading_version_4.html)
    * [Gradle的功能生命周期](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/feature_lifecycle.html)
  * [迁移至Gradle ...](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#migrating-to-gradle)
    * [从Maven](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/migrating_from_maven.html)
    * [来自蚂蚁](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/migrating_from_ant.html)
  * [相容性说明](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/compatibility.html)
  * [对构建进行故障排除](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/troubleshooting.html)

### 运行Gradle构建

  * [自定义执行](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#customizing-execution)
    * [配置构建环境](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/build_environment.html)
    * [Configuring the Gradle Daemon](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/gradle_daemon.html)
    * [Using Initialization Scripts](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/init_scripts.html)
  * [执行多项目构建](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/intro_multi_project_builds.html)
  * [检查Gradle构建](https://scans.gradle.com/)
  * [优化构建时间](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#optimizing-build-performance)
    * [Build Performance Guide](https://guides.gradle.org/performance/)
    * [Enabling and Configuring the Build Cache](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/build_cache.html)
    * [Using the Configuration Cache](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/configuration_cache.html)

### 编写Gradle构建

  * [学习基础](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#learning-the-basics)
    * [Introducing the Basics of Build Scripts](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/tutorial_using_tasks.html)
    * [Working with Tasks](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/more_about_tasks.html)
    * [Learning More About Build Scripts](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/writing_build_scripts.html)
    * [Working with Files](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/working_with_files.html)
    * [Using Gradle Plugins](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/plugins.html)
    * [Understanding the Build Lifecycle](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/build_lifecycle.html)
    * [Working with Logging](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/logging.html)
    * [Avoiding Traps](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/potential_traps.html)
  * [创作多项目构建](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#authoring-multi-project-builds)
    * [Creating a Basic Multi-Project Build](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/multi_project_builds.html)
    * [Declaring Dependencies between Subprojects](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/declaring_dependencies_between_subprojects.html)
    * [Sharing Build Logic between Subprojects](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/sharing_build_logic_between_subprojects.html)
    * [Fine Tuning the Project Layout](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/fine_tuning_project_layout.html)
    * [Understanding Configuration and Execution](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/multi_project_configuration_and_execution.html)
  * [创作可持续建筑](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#authoring-sustainable-builds)
    * [Organizing Build Logic](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/organizing_gradle_projects.html)
    * [Following Best Practices](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/authoring_maintainable_build_scripts.html)
  * [先进技术](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#advanced-techniques)
    * [Developing Parallel Tasks](https://guides.gradle.org/using-the-worker-api/)
    * [Testing a Build with TestKit](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/test_kit.html)
    * [Using Ant from Gradle](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/ant.html)

### 编写JVM构建

  * [构建Java和JVM项目](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/building_java_projects.html)
  * [测试Java和JVM项目](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/java_testing.html)
  * [Java项目的工具链](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/toolchains.html)
  * [管理依赖关系](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_management_for_java_projects.html)
  * [JVM插件](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#jvm-plugins)
    * [Java Library Plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/java_library_plugin.html)
    * [Java Application Plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/application_plugin.html)
    * [Java Platform Plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/java_platform_plugin.html)
    * [Groovy Plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/groovy_plugin.html)
    * [Scala Plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/scala_plugin.html)

### 编写C ++ / Swift构建

  * [构建C ++项目](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/building_cpp_projects.html)
  * [测试C ++项目](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/cpp_testing.html)
  * [建立Swift项目](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/building_swift_projects.html)
  * [测试Swift项目](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/swift_testing.html)

### 使用依赖项

  * [学习基础](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#learning-the-basics-dependency-management)
    * [What is Dependency Management?](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/core_dependency_management.html)
    * [Declaring Repositories](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/declaring_repositories.html)
    * [Declaring Dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/declaring_dependencies.html)
    * [Understanding Library and Application Differences](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/library_vs_application.html)
    * [Viewing and Debugging Dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/viewing_debugging_dependencies.html)
    * [Understanding Resolution](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_resolution.html)
    * [Verifying dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_verification.html)
  * [声明版本](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#declaring-dependency-versions)
    * [Declaring Versions and Ranges](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/single_versions.html)
    * [Declaring Rich Versions](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/rich_versions.html)
    * [Handling Changing Versions](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dynamic_versions.html)
    * [Locking Versions](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_locking.html)
  * [控制翻译](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#controlling-transitive-dependencies)
    * [Upgrading Versions](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_constraints.html)
    * [Downgrading and Excluding](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_downgrade_and_exclude.html)
    * [Sharing Versions](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/platforms.html)
    * [Aligning Dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_version_alignment.html)
    * [Handling Mutually Exclusive Dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_capability_conflict.html)
    * [Fixing Metadata](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/component_metadata_rules.html)
    * [Customizing Resolution](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/resolution_rules.html)
    * [Preventing accidental upgrades](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/resolution_strategy_tuning.html)
  * [图书馆的生产和消费形式](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#modeling-features)
    * [Declaring Capabilities of a Library](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/component_capabilities.html)
    * [Modeling Feature Variants and Optional Dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/feature_variants.html)
    * [Understanding Variant Selection](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/variant_model.html)
    * [Declaring Variant Attributes](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/variant_attributes.html)
    * [Sharing Outputs of Projects](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/cross_project_publications.html)
    * [Transforming Artifacts](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/artifact_transforms.html)
  * [在多仓库环境中工作](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#multi-repo)
    * [Composing Builds](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/composite_builds.html)
  * [出版图书馆](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#publishing)
    * [设置发布](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_setup.html)
    * [了解Gradle模块元数据](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html)
    * [签署文物](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_signing.html)
    * [定制出版](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_customization.html)
    * [Maven发布插件](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_maven.html)
    * [常春藤发布插件](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_ivy.html)
  * [术语](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_management_terminology.html)

### 扩展摇篮

  * [插件开发教程](https://gradle.org/guides/?q=Plugin%20Development)
  * [编写Gradle任务类型](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/custom_tasks.html)
  * [编写Gradle插件](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/custom_plugins.html)
  * [编写自定义Gradle类型](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/custom_gradle_types.html)
  * [延迟配置任务](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/lazy_configuration.html)
  * [使用避免任务配置](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/task_configuration_avoidance.html)

### 参考

  * [核心插件](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/plugin_reference.html)
  * [命令行界面](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/command_line_interface.html)
  * [Gradle和第三方工具](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/third_party_integration.html)
  * [摇篮包装](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/gradle_wrapper.html)
  * [Gradle管理的目录](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/directory_layout.html)

# 了解Gradle模块元数据

version 6.7.1

内容

  * [与其他格式的映射](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:mapping-with-other-formats)
  * [与其他构建工具的交互](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:interactions-other-build-tools)
  * [Gradle模块元数据验证](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:gmm-validation)
  * [使Gradle模块元数据可重现](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:gmm-reproducible)
  * [禁用Gradle模块元数据发布](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:disabling-gmm-publication)

Gradle Module Metadata is a format used to serialize the Gradle component
model. It is similar to [Apache Maven™'s POM
file](https://maven.apache.org/pom.html) or [Apache Ivy™
ivy.xml](http://ant.apache.org/ivy/) files. The goal of metadata files is to
provide _to consumers_ a reasonable model of what is published on a
repository.

Gradle Module Metadata is a unique format aimed at improving dependency
resolution by making it multi-platform and variant-aware.

In particular, Gradle Module Metadata supports:

  * [rich version constraints](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/rich_versions.html#rich-version-constraints)

  * [dependency constraints](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_constraints.html#sec:adding-constraints-transitive-deps)

  * [component capabilities](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/component_capabilities.html#declaring-component-capabilities)

  * [variant-aware resolution](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/variant_model.html#understanding-variant-selection)

Publication of Gradle Module Metadata will enable better dependency management
for your consumers:

  * early discovery of problems by detecting [incompatible modules](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/component_capabilities.html#declaring-component-capabilities)

  * consistent selection of [platform-specific dependencies](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/cross_project_publications.html#targeting-different-platforms)

  * native [dependency version alignement](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_version_alignment.html#version_alignment)

  * automatically getting dependencies for specific [features of your library](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/feature_variants.html)

Gradle Module Metadata is automatically published when using the [Maven
Publish
plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_maven.html)
or the [Ivy Publish
plugin](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_ivy.html).
It is _not_ supported on the legacy `maven` and `ivy` plugins.

The specification for Gradle Module Metadata specification can be found
[here](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/docs/design/gradle-
module-metadata-latest-specification.md).

##
[](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:mapping-
with-other-formats)[Mapping with other
formats](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:mapping-
with-other-formats)

Gradle Module Metadata is automatically published on Maven or Ivy
repositories. However, it doesn’t replace the _pom.xml_ or _ivy.xml_ files: it
is published alongside those files. This is done to maximize compatibility
with third-party build tools.

Gradle does its best to map Gradle-specific concepts to Maven or Ivy. When a
build file uses features that can only be represented in Gradle Module
Metadata, Gradle will warn you at publication time. The table below summarizes
how some Gradle specific features are mapped to Maven and Ivy:

Table 1. Mapping of Gradle specific concepts to Maven and Ivy Gradle | Maven |
Ivy | Description  
---|---|---|---  
  
[dependency
constraints](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/dependency_constraints.html#sec:adding-
constraints-transitive-deps)

|

`<dependencyManagement>` dependencies

|

Not published

|

Gradle dependency constraints are _transitive_ , while Maven’s dependency
management block _isn’t_  
  
[丰富的版本限制](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/rich_versions.html#rich-
version-constraints)

|

发布 _需求_ 版本

|

发布了 _需求_ 版本

|  
  
[组件功能](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/component_capabilities.html#declaring-
component-capabilities)

|

未发表

|

未发表

|

组件功能是Gradle独有的  
  
[功能变体](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/feature_variants.html)

|

上载变异工件，依赖性发布为_optional依赖性

|

已上传变体工件，未发布依赖项

|

功能变体很好地替代了可选的依赖项  
  
[自定义组件类型](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_customization.html#sec:publishing-
custom-components)

|

工件已上传，依赖项是映射所描述的依赖项

|

工件已上传，依赖项已忽略

|

在任何情况下，自定义组件类型都可能无法从Maven或Ivy中使用。它们通常存在于自定义生态系统中。  
  
###
[](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#disabling_metadata_compatibility_publication_warnings)[禁用元数据兼容性发布警告](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#disabling_metadata_compatibility_publication_warnings)

如果要禁止显示警告，可以使用以下API来禁止显示：

  * 对于Maven，请参见[MavenPublication中](file:///Users/dxs/temp/gradle-6.7.1/docs/dsl/org.gradle.api.publish.maven.MavenPublication.html#org.gradle.api.publish.maven.MavenPublication:suppressAllPomMetadataWarnings\(\))的`suppress*`方法。[](file:///Users/dxs/temp/gradle-6.7.1/docs/dsl/org.gradle.api.publish.maven.MavenPublication.html#org.gradle.api.publish.maven.MavenPublication:suppressAllPomMetadataWarnings\(\))

  * 对于常春藤，请参见[IvyPublication中](file:///Users/dxs/temp/gradle-6.7.1/docs/dsl/org.gradle.api.publish.ivy.IvyPublication.html#org.gradle.api.publish.ivy.IvyPublication:suppressAllIvyMetadataWarnings\(\))的`suppress*`方法[](file:///Users/dxs/temp/gradle-6.7.1/docs/dsl/org.gradle.api.publish.ivy.IvyPublication.html#org.gradle.api.publish.ivy.IvyPublication:suppressAllIvyMetadataWarnings\(\))

例子1.禁用发布警告

`Groovy``Kotlin`

build.gradle

    
    
        publications {
            maven(MavenPublication) {
                from components.java
                suppressPomMetadataWarningsFor('runtimeElements')
            }
        }

build.gradle.kts

    
    
        publications {
            register<MavenPublication>("maven") {
                from(components["java"])
                suppressPomMetadataWarningsFor("runtimeElements")
            }
        }

##
[](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:interactions-
other-build-
tools)[与其他构建工具的交互](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:interactions-
other-build-tools)

由于Gradle模块元数据并未广泛传播，并且其目的是[最大程度地提高与其他工具的兼容性](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:mapping-
with-other-formats)，因此Gradle做以下几件事：

  * Gradle模块元数据会与给定存储库（Maven或Ivy）的常规描述符一起系统发布

  * 的`pom.xml`或`ivy.xml`文件将包含一个 _标记评论_ 它告诉该摇篮模块摇篮元数据存在该模块

标记的目的 _不是_ 其他工具来解析模块元数据：仅用于Gradle用户。它向Gradle解释说存在 _更好的_
模块元数据文件，并且应该使用它。这并不意味着Maven或Ivy的消耗也将被打破，仅意味着它可以在[降级模式下工作](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:mapping-
with-other-formats)。

__ |

必须将其视为一种 _性能优化_ ：不必执行2个网络请求，而是先获取Gradle模块元数据，然后再获取一个POM /
Ivy文件，而Gradle将首先查看该文件中最重要的文件。可能存在，则仅在模块与Gradle Module Metadata实际发布时才执行第二个请求。  
  
---|---  
  
如果您知道依赖的模块始终与Gradle Module Metadata一起发布，则可以优化网络调用，为存储库配置元数据源：

示例2.仅解决Gradle模块元数据

`Groovy``Kotlin`

build.gradle

    
    
        repositories {
            maven {
                url "http://repo.mycompany.com/repo"
                metadataSources {
                    gradleMetadata()
                }
            }
        }

build.gradle.kts

    
    
        repositories {
            maven {
                setUrl("http://repo.mycompany.com/repo")
                metadataSources {
                    gradleMetadata()
                }
            }
        }

##
[](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:gmm-
validation)[Gradle模块元数据验证](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:gmm-
validation)

Gradle模块元数据在发布之前先经过验证。

强制执行以下规则：

  * 变体名称必须唯一，

  * 每个变体必须至少具有[一个属性](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/variant_attributes.html)，

  * 两个变体不能具有[完全相同的属性和功能](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/variant_model.html)，

  * 如果存在依赖性，则所有变体中的至少一个必须携带[版本信息](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/rich_versions.html)。

这些规则可确保生成的元数据的质量，并有助于确认使用不会有问题。

##
[](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:gmm-
reproducible)[使Gradle模块元数据可重现](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:gmm-
reproducible)

默认情况下，Gradle模块元数据文件包含生成该文件的构建中的唯一ID。这意味着文件将始终是不同的。

用户可以选择在其禁用以下唯一标识符`publication`：

例子3.配置发布的构建标识符

`Groovy``Kotlin`

build.gradle

    
    
    publishing {
        publications {
            main(MavenPublication) {
                from components.java
                withoutBuildIdentifier()
            }
        }
    }

build.gradle.kts

    
    
    publishing {
        publications {
            create<MavenPublication>("main") {
                from(components["java"])
                withoutBuildIdentifier()
            }
        }
    }

通过上述更改，生成的Gradle Module元数据文件将始终相同，从而使下游任务可以将其视为最新文件。

__ |

`UP-TO-
DATE`由于实现方式，生成模块元数据文件的任务目前从未被Gradle标记。但是，如果跳过了构建标识符，并且未更改构建输入或构建脚本，则该任务实际上是最新的（它始终产生相同的输出）。  
  
---|---  
  
##
[](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:disabling-
gmm-
publication)[禁用Gradle模块元数据发布](file:///Users/dxs/temp/gradle-6.7.1/docs/userguide/publishing_gradle_module_metadata.html#sub:disabling-
gmm-publication)

在某些情况下，您可能需要禁用Gradle模块元数据的发布：

  * 您要上传到的存储库将拒绝元数据文件（未知格式）

  * 您正在使用未正确映射到Gradle模块元数据的Maven或Ivy特定概念

在这种情况下，只需禁用生成元数据文件的任务即可禁用Gradle Module元数据的发布：

例子4.禁用发布Gradle模块元数据

`Groovy``Kotlin`

build.gradle

    
    
        tasks.withType(GenerateModuleMetadata) {
            enabled = false
        }

build.gradle.kts

    
    
        tasks.withType<GenerateModuleMetadata> {
            enabled = false
        }

**文件**

  * [用户手册](file:///userguide/userguide.html)
  * [DSL参考](file:///dsl/)
  * [发行说明](file:///release-notes.html)
  * [Java文档](file:///javadoc/)

**新闻**

  * [博客](https://blog.gradle.org/)
  * [通讯](https://newsletter.gradle.com/)
  * [推特](https://twitter.com/gradle)
  * [状态页](https://status.gradle.com/)

**产品展示**

  * [构建扫描](https://gradle.com/build-scans/)
  * [构建缓存](https://gradle.com/build-cache/)
  * [企业文件](https://gradle.com/enterprise/resources/)

**得到帮助**

  * [论坛](https://discuss.gradle.org/c/help-discuss)
  * [的GitHub](https://github.com/gradle/)
  * [训练](https://gradle.com/training/)
  * [服务](https://gradle.org/services/)

##### 随时`UP-TO-DATE`关注新功能和新闻

输入您的电子邮件，即表示您同意我们的[条款](https://gradle.com/legal/terms-of-
service/)和[隐私政策](https://gradle.com/legal/privacy/)，包括接收电子邮件。您可以随时取消订阅。

订阅

© [Gradle Inc.](https://gradle.com/) 2020年 版权所有。

[ gradle ](file:///)

[招贤纳士](https://gradle.com/careers/)| [隐私](https://gradle.com/legal/privacy/)|
[服务条款](https://gradle.com/legal/terms-of-service/)|
[联系](https://gradle.org/contact/)

![Google 翻译](./了解Gradle模块元数据_files/translate_24dp.png)

# 原文

提供更好的翻译建议

* * *

