

[ Gradle ](https://docs.gradle.org "Gradle Docs")

User Manual

  * Community Open Community Menu

[ Community Home ](https://gradle.org/)

[ Community Forums ](https://discuss.gradle.org/)

[ Community Plugins ](https://plugins.gradle.org)

  * [Training](https://gradle.com/training/)
  * News Open Community Menu

[ Newsletter ](https://newsletter.gradle.com)

[ Blog ](https://blog.gradle.org)

[ Twitter ](https://twitter.com/gradle)

  * [Enterprise](https://gradle.com)
  * [github](https://github.com/gradle/gradle "Gradle on GitHub")

  * [Docs Home](../userguide/userguide.html)
  * [Samples](../samples/index.html)
  * [Release Notes](../release-notes.html)
  * Gradle DSLs and API
    * [Javadoc](../javadoc/index.html?overview-summary.html)
    * [Groovy DSL Reference](../dsl/index.html)
    * [Groovy DSL Primer](../userguide/groovy_build_script_primer.html)
    * [Kotlin DSL API](https://gradle.github.io/kotlin-dsl-docs/api/)
    * [Kotlin DSL Primer](../userguide/kotlin_dsl.html)
    * [Groovy to Kotlin DSL Migration](../userguide/migrating_from_groovy_to_kotlin_dsl.html)

### User Manual

[ PDF ](../userguide/userguide.pdf)

  * [What is Gradle?](../userguide/what_is_gradle.html)
  * [Getting Started](../userguide/getting_started.html)
  * [Installing Gradle](../userguide/installation.html)
  * Upgrading Gradle...
    * [version 6.X to latest](../userguide/upgrading_version_6.html)
    * [version 5.X to 6.0](../userguide/upgrading_version_5.html)
    * [version 4.X to 5.0](../userguide/upgrading_version_4.html)
    * [Gradle's Feature Lifecycle](../userguide/feature_lifecycle.html)
  * Migrating to Gradle...
    * [from Maven](../userguide/migrating_from_maven.html)
    * [from Ant](../userguide/migrating_from_ant.html)
  * [Compatibility Notes](../userguide/compatibility.html)
  * [Troubleshooting Builds](../userguide/troubleshooting.html)

### Running Gradle Builds

  * Customizing Execution
    * [Configuring the Build Environment](../userguide/build_environment.html)
    * [Configuring the Gradle Daemon](../userguide/gradle_daemon.html)
    * [Using Initialization Scripts](../userguide/init_scripts.html)
  * [Executing Multi-Project Builds](../userguide/intro_multi_project_builds.html)
  * [Inspecting Gradle Builds](https://scans.gradle.com/)
  * Using the Build Cache
    * [Enabling and Configuring](../userguide/build_cache.html)
    * [Why use the Build Cache?](../userguide/build_cache_use_cases.html)
    * [Understanding the Impact](../userguide/build_cache_performance.html)
    * [Learning Basic Concepts](../userguide/build_cache_concepts.html)
    * [Caching Java Project](../userguide/caching_java_projects.html)
    * [Caching Android Project](../userguide/caching_android_projects.html)
    * [Debugging Caching Issues](../userguide/build_cache_debugging.html)
    * [Troubleshooting](../userguide/common_caching_problems.html)
  * Optimizing Build Times
    * [Improving Performance of Gradle Builds](../userguide/performance.html)
    * [Using the Configuration Cache](../userguide/configuration_cache.html)

### Authoring Gradle Builds

  * Learning the Basics
    * [Writing Build Scripts](../userguide/tutorial_using_tasks.html)
    * [Working with Tasks](../userguide/more_about_tasks.html)
    * [Learning More About Build Scripts](../userguide/writing_build_scripts.html)
    * [Working with Files](../userguide/working_with_files.html)
    * [Using Gradle Plugins](../userguide/plugins.html)
    * [Understanding the Build Lifecycle](../userguide/build_lifecycle.html)
    * [Working with Logging](../userguide/logging.html)
    * [Avoiding Traps](../userguide/potential_traps.html)
  * Structuring Individual Builds
    * [Creating a Basic Multi-Project Build](../userguide/multi_project_builds.html)
    * [Declaring Dependencies between Subprojects](../userguide/declaring_dependencies_between_subprojects.html)
    * [Sharing Build Logic between Subprojects](../userguide/sharing_build_logic_between_subprojects.html)
    * [Fine Tuning the Project Layout](../userguide/fine_tuning_project_layout.html)
    * [Understanding Configuration and Execution](../userguide/multi_project_configuration_and_execution.html)
  * Structuring Software Products
    * [Structuring large Projects](../userguide/structuring_software_products.html)
    * [Tweaking Project Structure](../userguide/structuring_software_products_details.html)
    * [Composing Builds](../userguide/composite_builds.html)
  * Authoring Sustainable Builds
    * [Organizing Build Logic](../userguide/organizing_gradle_projects.html)
    * [Following Best Practices](../userguide/authoring_maintainable_build_scripts.html)
  * Advanced Techniques
    * [Testing a Build with TestKit](../userguide/test_kit.html)
    * [Using Ant from Gradle](../userguide/ant.html)

### Authoring JVM Builds

  * [Building Java & JVM projects](../userguide/building_java_projects.html)
  * [Testing Java & JVM projects](../userguide/java_testing.html)
  * [Toolchains for Java projects](../userguide/toolchains.html)
  * [Managing Dependencies](../userguide/dependency_management_for_java_projects.html)
  * JVM Plugins
    * [Java Library Plugin](../userguide/java_library_plugin.html)
    * [Java Application Plugin](../userguide/application_plugin.html)
    * [Java Platform Plugin](../userguide/java_platform_plugin.html)
    * [Groovy Plugin](../userguide/groovy_plugin.html)
    * [Scala Plugin](../userguide/scala_plugin.html)

### Authoring C++/Swift Builds

  * [Building C++ projects](../userguide/building_cpp_projects.html)
  * [Testing C++ projects](../userguide/cpp_testing.html)
  * [Building Swift projects](../userguide/building_swift_projects.html)
  * [Testing Swift projects](../userguide/swift_testing.html)

### Working with Dependencies

  * Learning the Basics
    * [What is Dependency Management?](../userguide/core_dependency_management.html)
    * [Declaring Repositories](../userguide/declaring_repositories.html)
    * [Declaring Dependencies](../userguide/declaring_dependencies.html)
    * [Understanding Library and Application Differences](../userguide/library_vs_application.html)
    * [Viewing and Debugging Dependencies](../userguide/viewing_debugging_dependencies.html)
    * [Understanding Resolution](../userguide/dependency_resolution.html)
    * [Verifying dependencies](../userguide/dependency_verification.html)
  * Declaring Versions
    * [Declaring Versions and Ranges](../userguide/single_versions.html)
    * [Declaring Rich Versions](../userguide/rich_versions.html)
    * [Handling Changing Versions](../userguide/dynamic_versions.html)
    * [Locking Versions](../userguide/dependency_locking.html)
  * Controlling Transitives
    * [Upgrading Versions](../userguide/dependency_constraints.html)
    * [Downgrading and Excluding](../userguide/dependency_downgrade_and_exclude.html)
    * [Sharing Versions](../userguide/platforms.html)
    * [Aligning Dependencies](../userguide/dependency_version_alignment.html)
    * [Handling Mutually Exclusive Dependencies](../userguide/dependency_capability_conflict.html)
    * [Fixing Metadata](../userguide/component_metadata_rules.html)
    * [Customizing Resolution](../userguide/resolution_rules.html)
    * [Preventing accidental upgrades](../userguide/resolution_strategy_tuning.html)
  * Producing and Consuming Variants of Libraries
    * [Declaring Capabilities of a Library](../userguide/component_capabilities.html)
    * [Modeling Feature Variants and Optional Dependencies](../userguide/feature_variants.html)
    * [Understanding Variant Selection](../userguide/variant_model.html)
    * [Declaring Variant Attributes](../userguide/variant_attributes.html)
    * [Sharing Outputs of Projects](../userguide/cross_project_publications.html)
    * [Transforming Artifacts](../userguide/artifact_transforms.html)
  * Publishing Libraries
    * [Setting up Publishing](../userguide/publishing_setup.html)
    * [Understanding Gradle Module Metadata](../userguide/publishing_gradle_module_metadata.html)
    * [Signing Artifacts](../userguide/publishing_signing.html)
    * [Customizing Publishing](../userguide/publishing_customization.html)
    * [Maven Publish Plugin](../userguide/publishing_maven.html)
    * [Ivy Publish Plugin](../userguide/publishing_ivy.html)
  * [Terminology](../userguide/dependency_management_terminology.html)

### Extending Gradle

  * Developing Gradle Plugins
    * [Starting Plugin Development](../userguide/custom_plugins.html)
    * [Designing Plugins](../userguide/designing_gradle_plugins.html)
    * [Implementing Plugins](../userguide/implementing_gradle_plugins.html)
    * [Testing Plugins](../userguide/testing_gradle_plugins.html)
    * [Publishing Plugins](../userguide/publishing_gradle_plugins.html)
  * Developing Gradle Tasks
    * [Writing Gradle Task Types](../userguide/custom_tasks.html)
    * [Configuring Tasks Lazily](../userguide/lazy_configuration.html)
    * [Avoiding Unnecessary Task Configuration](../userguide/task_configuration_avoidance.html)
    * [Developing Parallel Tasks](../userguide/worker_api.html)
  * [Writing Custom Gradle Types](../userguide/custom_gradle_types.html)

### Reference

  * [Core Plugins](../userguide/plugin_reference.html)
  * [Command-Line Interface](../userguide/command_line_interface.html)
  * Gradle & Third-party Tools
    * [Third-party Tools](../userguide/third_party_integration.html)
    * [Jenkins](../userguide/jenkins.html)
    * [TeamCity](../userguide/teamcity.html)
    * [Travis CI](../userguide/travis-ci.html)
  * [](../userguide/third_party_integration.html)
  * [The Gradle Wrapper](../userguide/gradle_wrapper.html)
  * [Gradle-managed Directories](../userguide/directory_layout.html)

# Declaring Dependencies between Subprojects

version 6.9-20201126230040+0000

Contents

  * Project dependencies
  * Depending on artifacts produced by another project

## Project dependencies

What if one project needs the jar produced by another project on its compile
classpath? What if it also requires the transitive dependencies of the other
project? Obviously this is a very common use case for Java multi-project
builds. As mentioned in [Project
dependencies](declaring_dependencies.html#sub:project_dependencies), Gradle
offers project dependencies for this.

Example 1. Project dependencies

Project layout

    
    
    .
    ├── buildSrc
    │   ...
    ├── api
    │   ├── src
    │   │   └──...
    │   └── build.gradle
    ├── services
    │   └── person-service
    │       ├── src
    │       │   └──...
    │       └── build.gradle
    ├── shared
    │   ├── src
    │   │   └──...
    │   └── build.gradle
    └── settings.gradle

Project layout

    
    
    .
    ├── buildSrc
    │   ...
    ├── api
    │   ├── src
    │   │   └──...
    │   └── build.gradle.kts
    ├── services
    │   └── person-service
    │       ├── src
    │       │   └──...
    │       └── build.gradle.kts
    ├── shared
    │   ├── src
    │   │   └──...
    │   └── build.gradle.kts
    └── settings.gradle.kts

We have the projects `shared`, `api` and `person-service`. The `person-
service` project has a dependency on the other two projects. The `api` project
has a dependency on the `shared` project. It has no build script and gets
nothing injected by another build script. We use the `:` separator to define a
project path. Consult the DSL documentation of
[Settings.include(java.lang.String[])](../dsl/org.gradle.api.initialization.Settings.html#org.gradle.api.initialization.Settings:include\(java.lang.String\[\]\))
for more information about defining project paths.

settings.gradle

    
    
    rootProject.name = 'dependencies-java'
    include 'api', 'shared', 'services:person-service'

buildSrc/src/main/groovy/myproject.java-conventions.gradle

    
    
    plugins {
        id 'java'
    }
    
    group = 'com.example'
    version = '1.0'
    
    repositories {
        mavenCentral()
    }
    
    dependencies {
        testImplementation "junit:junit:4.13"
    }

api/build.gradle

    
    
    plugins {
        id 'myproject.java-conventions'
    }
    
    dependencies {
        implementation project(':shared')
    }

shared/build.gradle

    
    
    plugins {
        id 'myproject.java-conventions'
    }

services/person-service/build.gradle

    
    
    plugins {
        id 'myproject.java-conventions'
    }
    
    dependencies {
        implementation project(':shared')
        implementation project(':api')
    }

settings.gradle.kts

    
    
    rootProject.name = "dependencies-java"
    include("api", "shared", "services:person-service")

buildSrc/src/main/kotlin/myproject.java-conventions.gradle.kts

    
    
    plugins {
        id("java")
    }
    
    group = "com.example"
    version = "1.0"
    
    repositories {
        mavenCentral()
    }
    
    dependencies {
        testImplementation("junit:junit:4.13")
    }

api/build.gradle.kts

    
    
    plugins {
        id("myproject.java-conventions")
    }
    
    dependencies {
        implementation(project(":shared"))
    }

shared/build.gradle.kts

    
    
    plugins {
        id("myproject.java-conventions")
    }

services/person-service/build.gradle.kts

    
    
    plugins {
        id("myproject.java-conventions")
    }
    
    dependencies {
        implementation(project(":shared"))
        implementation(project(":api"))
    }

Shared build logic is extracted into a _convention plugin_ that is applied in
the subprojects' build scripts that also define project dependencies. A
project dependency is a special form of an execution dependency. It causes the
other project to be built first and adds the jar with the classes of the other
project to the classpath. It also adds the dependencies of the other project
to the classpath. You can trigger a `gradle :api:compile`. First the `shared`
project is built and then the `api` project is built. Project dependencies
enable partial multi-project builds.

## Depending on artifacts produced by another project

Project dependencies model dependencies between modules. Effectively, you are
saying that you depend on the main output of another project. In a Java-based
project that's usually a JAR file.

Sometimes you may want to depend on an output produced by another task. In
turn, you'll want to make sure that the task is executed beforehand to produce
that very output. Declaring a task dependency from one project to another is a
poor way to model this kind of relationship and introduces unnecessary
coupling. The recommended way to model such a dependency is to produce the
output, mark it as an "outgoing" artifact or add it to the output of the
`main` source set which you can depend on in the consuming project.

Let's say you are working in a multi-project build with the two subprojects
`producer` and `consumer`. The subproject `producer` defines a task named
`buildInfo` that generates a properties file containing build information e.g.
the project version. You can then map the task provider to its output file and
Gradle will automatically establish a task dependency.

Example 2. Task generating a property file containing build information

build.gradle

    
    
    plugins {
        id 'java-library'
    }
    
    version = '1.0'
    
    def buildInfo = tasks.register("buildInfo", BuildInfo) {
        version = project.version
        outputFile = file("$buildDir/generated-resources/build-info.properties")
    }
    
    sourceSets {
        main {
            output.dir(buildInfo.map { it.outputFile.asFile.get().parentFile })
        }
    }

build.gradle.kts

    
    
    plugins {
        id("java-library")
    }
    
    version = "1.0"
    
    val buildInfo by tasks.registering(BuildInfo::class) {
        version.set(project.version.toString())
        outputFile.set(file("$buildDir/generated-resources/build-info.properties"))
    }
    
    sourceSets {
        main {
            output.dir(buildInfo.map { it.outputFile.asFile.get().parentFile })
        }
    }

buildSrc/src/main/java/BuildInfo.java

    
    
    public abstract class BuildInfo extends DefaultTask {
    
        @Input
        public abstract Property<String> getVersion();
    
        @OutputFile
        public abstract RegularFileProperty getOutputFile();
    
        @TaskAction
        public void create() throws IOException {
            Properties prop = new Properties();
            prop.setProperty("version", getVersion().get());
            try (OutputStream output = new FileOutputStream(getOutputFile().getAsFile().get())) {
                prop.store(output, null);
            }
        }
    }

The consuming project is supposed to be able to read the properties file at
runtime. Declaring a project dependency on the producing project takes care of
creating the properties beforehand and making it available to the runtime
classpath.

Example 3. Declaring a project dependency on the project producing the
properties file

build.gradle

    
    
    dependencies {
        runtimeOnly project(':producer')
    }

build.gradle.kts

    
    
    dependencies {
        runtimeOnly(project(":producer"))
    }

In the example above, the consumer now declares a dependency on the outputs of
the `producer` project.

Depending on the main output artifact from another project is only one
example. Gradle has one of the most powerful [dependency management
engines](core_dependency_management.html#sec:dependency-mgmt-in-gradle) that
allows you to share arbitrary artifacts between projects and let Gradle build
them on demand. For more details see the section on [sharing outputs between
projects](cross_project_publications.html#cross_project_publications).

**Docs**

  * [User Manual](/userguide/userguide.html)
  * [DSL Reference](/dsl/)
  * [Release Notes](/release-notes.html)
  * [Javadoc](/javadoc/)

**News**

  * [Blog](https://blog.gradle.org/)
  * [Newsletter](https://newsletter.gradle.com/)
  * [Twitter](https://twitter.com/gradle)
  * [Status Page](https://status.gradle.com/)

**Products**

  * [Build Scans](https://gradle.com/build-scans/)
  * [Build Cache](https://gradle.com/build-cache/)
  * [Enterprise Docs](https://gradle.com/enterprise/resources/)

**Get Help**

  * [Forums](https://discuss.gradle.org/c/help-discuss)
  * [GitHub](https://github.com/gradle/)
  * [Training](https://gradle.com/training/)
  * [Services](https://gradle.org/services/)

##### Stay `UP-TO-DATE` on new features and news

By entering your email, you agree to our
[Terms](https://gradle.com/legal/terms-of-service/) and [Privacy
Policy](https://gradle.com/legal/privacy/), including receipt of emails. You
can unsubscribe at any time.

Subscribe

© [Gradle Inc.](https://gradle.com) 2020 All rights reserved.

[ gradle ](/)

[Careers](https://gradle.com/careers/) |
[Privacy](https://gradle.com/legal/privacy/) | [Terms of
Service](https://gradle.com/legal/terms-of-service/) |
[Contact](https://gradle.org/contact/)

