

[ Gradle ](https://docs.gradle.org "Gradle Docs")

User Manual

  * Community Open Community Menu

[ Community Home ](https://gradle.org/)

[ Community Forums ](https://discuss.gradle.org/)

[ Community Plugins ](https://plugins.gradle.org)

  * [Training](https://gradle.com/training/)
  * News Open Community Menu

[ Newsletter ](https://newsletter.gradle.com)

[ Blog ](https://blog.gradle.org)

[ Twitter ](https://twitter.com/gradle)

  * [Enterprise](https://gradle.com)
  * [github](https://github.com/gradle/gradle "Gradle on GitHub")

  * [Docs Home](../userguide/userguide.html)
  * [Samples](../samples/index.html)
  * [Release Notes](../release-notes.html)
  * Gradle DSLs and API
    * [Javadoc](../javadoc/index.html?overview-summary.html)
    * [Groovy DSL Reference](../dsl/index.html)
    * [Groovy DSL Primer](../userguide/groovy_build_script_primer.html)
    * [Kotlin DSL API](https://gradle.github.io/kotlin-dsl-docs/api/)
    * [Kotlin DSL Primer](../userguide/kotlin_dsl.html)
    * [Groovy to Kotlin DSL Migration](../userguide/migrating_from_groovy_to_kotlin_dsl.html)

### User Manual

[ PDF ](../userguide/userguide.pdf)

  * [What is Gradle?](../userguide/what_is_gradle.html)
  * [Getting Started](../userguide/getting_started.html)
  * [Installing Gradle](../userguide/installation.html)
  * Upgrading Gradle...
    * [version 6.X to latest](../userguide/upgrading_version_6.html)
    * [version 5.X to 6.0](../userguide/upgrading_version_5.html)
    * [version 4.X to 5.0](../userguide/upgrading_version_4.html)
    * [Gradle's Feature Lifecycle](../userguide/feature_lifecycle.html)
  * Migrating to Gradle...
    * [from Maven](../userguide/migrating_from_maven.html)
    * [from Ant](../userguide/migrating_from_ant.html)
  * [Compatibility Notes](../userguide/compatibility.html)
  * [Troubleshooting Builds](../userguide/troubleshooting.html)

### Running Gradle Builds

  * Customizing Execution
    * [Configuring the Build Environment](../userguide/build_environment.html)
    * [Configuring the Gradle Daemon](../userguide/gradle_daemon.html)
    * [Using Initialization Scripts](../userguide/init_scripts.html)
  * [Executing Multi-Project Builds](../userguide/intro_multi_project_builds.html)
  * [Inspecting Gradle Builds](https://scans.gradle.com/)
  * Using the Build Cache
    * [Enabling and Configuring](../userguide/build_cache.html)
    * [Why use the Build Cache?](../userguide/build_cache_use_cases.html)
    * [Understanding the Impact](../userguide/build_cache_performance.html)
    * [Learning Basic Concepts](../userguide/build_cache_concepts.html)
    * [Caching Java Project](../userguide/caching_java_projects.html)
    * [Caching Android Project](../userguide/caching_android_projects.html)
    * [Debugging Caching Issues](../userguide/build_cache_debugging.html)
    * [Troubleshooting](../userguide/common_caching_problems.html)
  * Optimizing Build Times
    * [Improving Performance of Gradle Builds](../userguide/performance.html)
    * [Using the Configuration Cache](../userguide/configuration_cache.html)

### Authoring Gradle Builds

  * Learning the Basics
    * [Writing Build Scripts](../userguide/tutorial_using_tasks.html)
    * [Working with Tasks](../userguide/more_about_tasks.html)
    * [Learning More About Build Scripts](../userguide/writing_build_scripts.html)
    * [Working with Files](../userguide/working_with_files.html)
    * [Using Gradle Plugins](../userguide/plugins.html)
    * [Understanding the Build Lifecycle](../userguide/build_lifecycle.html)
    * [Working with Logging](../userguide/logging.html)
    * [Avoiding Traps](../userguide/potential_traps.html)
  * Structuring Individual Builds
    * [Creating a Basic Multi-Project Build](../userguide/multi_project_builds.html)
    * [Declaring Dependencies between Subprojects](../userguide/declaring_dependencies_between_subprojects.html)
    * [Sharing Build Logic between Subprojects](../userguide/sharing_build_logic_between_subprojects.html)
    * [Fine Tuning the Project Layout](../userguide/fine_tuning_project_layout.html)
    * [Understanding Configuration and Execution](../userguide/multi_project_configuration_and_execution.html)
  * Structuring Software Products
    * [Structuring large Projects](../userguide/structuring_software_products.html)
    * [Tweaking Project Structure](../userguide/structuring_software_products_details.html)
    * [Composing Builds](../userguide/composite_builds.html)
  * Authoring Sustainable Builds
    * [Organizing Build Logic](../userguide/organizing_gradle_projects.html)
    * [Following Best Practices](../userguide/authoring_maintainable_build_scripts.html)
  * Advanced Techniques
    * [Testing a Build with TestKit](../userguide/test_kit.html)
    * [Using Ant from Gradle](../userguide/ant.html)

### Authoring JVM Builds

  * [Building Java & JVM projects](../userguide/building_java_projects.html)
  * [Testing Java & JVM projects](../userguide/java_testing.html)
  * [Toolchains for Java projects](../userguide/toolchains.html)
  * [Managing Dependencies](../userguide/dependency_management_for_java_projects.html)
  * JVM Plugins
    * [Java Library Plugin](../userguide/java_library_plugin.html)
    * [Java Application Plugin](../userguide/application_plugin.html)
    * [Java Platform Plugin](../userguide/java_platform_plugin.html)
    * [Groovy Plugin](../userguide/groovy_plugin.html)
    * [Scala Plugin](../userguide/scala_plugin.html)

### Authoring C++/Swift Builds

  * [Building C++ projects](../userguide/building_cpp_projects.html)
  * [Testing C++ projects](../userguide/cpp_testing.html)
  * [Building Swift projects](../userguide/building_swift_projects.html)
  * [Testing Swift projects](../userguide/swift_testing.html)

### Working with Dependencies

  * Learning the Basics
    * [What is Dependency Management?](../userguide/core_dependency_management.html)
    * [Declaring Repositories](../userguide/declaring_repositories.html)
    * [Declaring Dependencies](../userguide/declaring_dependencies.html)
    * [Understanding Library and Application Differences](../userguide/library_vs_application.html)
    * [Viewing and Debugging Dependencies](../userguide/viewing_debugging_dependencies.html)
    * [Understanding Resolution](../userguide/dependency_resolution.html)
    * [Verifying dependencies](../userguide/dependency_verification.html)
  * Declaring Versions
    * [Declaring Versions and Ranges](../userguide/single_versions.html)
    * [Declaring Rich Versions](../userguide/rich_versions.html)
    * [Handling Changing Versions](../userguide/dynamic_versions.html)
    * [Locking Versions](../userguide/dependency_locking.html)
  * Controlling Transitives
    * [Upgrading Versions](../userguide/dependency_constraints.html)
    * [Downgrading and Excluding](../userguide/dependency_downgrade_and_exclude.html)
    * [Sharing Versions](../userguide/platforms.html)
    * [Aligning Dependencies](../userguide/dependency_version_alignment.html)
    * [Handling Mutually Exclusive Dependencies](../userguide/dependency_capability_conflict.html)
    * [Fixing Metadata](../userguide/component_metadata_rules.html)
    * [Customizing Resolution](../userguide/resolution_rules.html)
    * [Preventing accidental upgrades](../userguide/resolution_strategy_tuning.html)
  * Producing and Consuming Variants of Libraries
    * [Declaring Capabilities of a Library](../userguide/component_capabilities.html)
    * [Modeling Feature Variants and Optional Dependencies](../userguide/feature_variants.html)
    * [Understanding Variant Selection](../userguide/variant_model.html)
    * [Declaring Variant Attributes](../userguide/variant_attributes.html)
    * [Sharing Outputs of Projects](../userguide/cross_project_publications.html)
    * [Transforming Artifacts](../userguide/artifact_transforms.html)
  * Publishing Libraries
    * [Setting up Publishing](../userguide/publishing_setup.html)
    * [Understanding Gradle Module Metadata](../userguide/publishing_gradle_module_metadata.html)
    * [Signing Artifacts](../userguide/publishing_signing.html)
    * [Customizing Publishing](../userguide/publishing_customization.html)
    * [Maven Publish Plugin](../userguide/publishing_maven.html)
    * [Ivy Publish Plugin](../userguide/publishing_ivy.html)
  * [Terminology](../userguide/dependency_management_terminology.html)

### Extending Gradle

  * Developing Gradle Plugins
    * [Starting Plugin Development](../userguide/custom_plugins.html)
    * [Designing Plugins](../userguide/designing_gradle_plugins.html)
    * [Implementing Plugins](../userguide/implementing_gradle_plugins.html)
    * [Testing Plugins](../userguide/testing_gradle_plugins.html)
    * [Publishing Plugins](../userguide/publishing_gradle_plugins.html)
  * Developing Gradle Tasks
    * [Writing Gradle Task Types](../userguide/custom_tasks.html)
    * [Configuring Tasks Lazily](../userguide/lazy_configuration.html)
    * [Avoiding Unnecessary Task Configuration](../userguide/task_configuration_avoidance.html)
    * [Developing Parallel Tasks](../userguide/worker_api.html)
  * [Writing Custom Gradle Types](../userguide/custom_gradle_types.html)

### Reference

  * [Core Plugins](../userguide/plugin_reference.html)
  * [Command-Line Interface](../userguide/command_line_interface.html)
  * Gradle & Third-party Tools
    * [Third-party Tools](../userguide/third_party_integration.html)
    * [Jenkins](../userguide/jenkins.html)
    * [TeamCity](../userguide/teamcity.html)
    * [Travis CI](../userguide/travis-ci.html)
  * [](../userguide/third_party_integration.html)
  * [The Gradle Wrapper](../userguide/gradle_wrapper.html)
  * [Gradle-managed Directories](../userguide/directory_layout.html)

# Customizing a Software Product build

version 6.9-20201126230040+0000

Contents

  * Working with the software project
  * Using multiple source repositories
  * Publishing and using binary components
  * Sharing repository and included build declarations between builds

This chapter covers more details on selected topics related to [structuring
and building a software product with
Gradle](structuring_software_products.html).

## Working with the software project

You have several options to interact with a build that is a composition of
multiple builds.

### Using an umbrella build

If all your builds are located in one folder structure, you can have an
umbrella build in a root folder that includes all builds. You can then [call
tasks from the root project by addressing one of the
builds](composite_builds.html#composite_build_executing_tasks). Usually, you
would then put the [Gradle wrapper](gradle_wrapper.html#sec:adding_wrapper)
into the root as well. [The
sample](../samples/sample_structuring_software_projects.html) on structuring
software projects contains such an umbrella build in the root. You can address
tasks from there:

    
    
    $ ./gradlew :server-application:app:bootRun
    
    $ ./gradlew :android-app:app:installDebug

The umbrella build is a good place to define cross-build [lifecycle
tasks](more_about_tasks.html#sec:lifecycle_tasks). For example, you can define
a `checkFeatures` task for conveniently running all checks in selected
components by adding a `build.gradle(.kts)` file to your umbrella build.

build.gradle

    
    
    // This is an example of a lifecycle task that crosses build boundaries defined in the umbrella build.
    tasks.register('checkFeatures') {
        group = 'verification'
        description = 'Run all feature tests'
        dependsOn(gradle.includedBuild('admin-feature').task(':config:check'))
        dependsOn(gradle.includedBuild('user-feature').task(':data:check'))
        dependsOn(gradle.includedBuild('user-feature').task(':table:check'))
    }

build.gradle.kts

    
    
    // This is an example of a lifecycle task that crosses build boundaries defined in the umbrella build.
    tasks.register("checkFeatures") {
        group = "verification"
        description = "Run all feature tests"
        dependsOn(gradle.includedBuild("admin-feature").task(":config:check"))
        dependsOn(gradle.includedBuild("user-feature").task(":data:check"))
        dependsOn(gradle.includedBuild("user-feature").task(":table:check"))
    }

In your IDE, you can import the umbrella build and then will have all Gradle
builds as projects/modules visible in the workspace.

### Working with components in isolation

Independent of whether you have an umbrella build or not, you can work with
each component independently. That is, you can pick any component build and
build it individually.

In [the sample](../samples/sample_structuring_software_projects.html), the
umbrella build is a convenience. The whole project can also be used without
it, if you work with the components independently.

    
    
    $ cd server-application
    $ ../gradlew :app:bootRun
    
    $ cd android-app
    $ ../gradlew :app:installDebug
    
    $ cd user-feature
    $ ../gradlew check

You can also import components independently in the IDE. This allows you to
focus only on the parts important for the component you work on in your IDE's
workspace. It might also speed up the IDE performance in the case of a very
large code base.

__ |

If all components live in the same repository, you should only have one
[Gradle wrapper](gradle_wrapper.html#sec:adding_wrapper) in the root of the
repository. If you have an umbrella build there, you can use that to manage
the wrapper.

However, if you import an individual component in an IDE, it might have issues
finding the wrapper and you might need to configure a Gradle installation
manually.

If your components are scattered over multiple repositories, each should have
its own wrapper, but you should ensure that you upgrade them simultaneously.  
  
---|---  
  
## Using multiple source repositories

Multi-repo development is a well known alternative to mono-repo development.
Both have advantages and disadvantages. It depends on many different factors
which setup works best for the development of your product.

Gradle aims to support both setups equally well. When you split your product
into components, each represented by an independent build, switching a Gradle
build between mono- and multi-repo development is simple. In mono-repo
development, you put all builds under a common root. In multi-repo
development, you place each build into a separate source repository.

Multi-repo development possibly needs some additional guidlines and tooling,
so that builds can still find each other. A simple solution is that users who
want to build a certain component need to clone all repositories of dependent
components next to each other in a file hierarchy. If you follow this pattern,
builds can find each other with `includeBuild("../other-component")`
statements. If locations are more flexible, you can also [invoke Gradle with
`--include-build` flags](composite_builds.html#command_line_composite) to
provide locations dynamically.

Another more evolved setup can involve versioning all components and, instead
of including the source versions of all components, depend on published
versions of them from binary repositories. This is described next.

## Publishing and using binary components

You can also decide to [publish your components to a binary
repository](publishing_setup.html). If you make the decision to do so at some
point and you want to work with binary versions of certain components instead
of the source versions, you can do that by [adding the repository to which you
published](declaring_repositories.html#sub:centralized-repository-declaration)
instead of the corresponding `includeBuild("…​")` statements in your
`settings.gradle(.kts)` file. If the components keep their coordinates, you do
not need to adjust any dependencies. You just need to define versions for the
components, ideally in a [platform project](platforms.html).

### Publishing components with convention plugins

Note that for publishing build logic components you should, in addition to
`maven-publish`, use the [plugin publishing
plugin](publishing_gradle_plugins.html#plugin-publishing-plugin) to publish so
called _plugin markers_ that allow Gradle to find plugins by ID – even if they
are located in a repository. You can use the plugin publishing plugin for that
even if you do not publish to the Gradle Plugin Portal. For that you only need
to [declare the repositories you want to publish
to](publishing_gradle_plugins.html#custom-plugin-repositories) in your build
the same way you do it for other components.

## Sharing repository and included build declarations between builds

Each component build has its own `settings.gradle(.kts)` file to describe the
location of other components. Which is done by declaring repositories with
binary components and by declaring file system locations of included builds.

If components are developed independently, it often makes sense to define
these individually for each one. Then it is individually controlled where the
other components originate from. Furthermore, the declarations might vary from
build to build. For example, you might only include the builds that are needed
to build a certain component and not all builds that make up the product.

However, it may also lead to redundancy as you declare the same repositories
and included builds in each `settings.gradle(.kts)` file again. In particular,
if all builds live in the same repository.

Similar as for build scripts, you can define _settings convention plugins_ for
the `settings.gradle(.kts)` file to reuse configuration. For that, you should
create a separate build. _Settings convention plugins_ can be [written in
Groovy DSL or Kotlin DSL similar to other convention
plugins](custom_plugins.html#sec:precompiled_plugins). The script file name
has to end with `.settings.gradle(.kts)`.

__ |  As of Gradle 6.8, settings plugins cannot be directly used from included
builds. This will be resolved in future Gradle versions. For now, you have to
[publish the settings convention plugins to a repository of your
choice](../samples/sample_publishing_convention_plugins.html#publishing_convention_plugins).
You may publish to a local folder if you do not use a remote repository.  
---|---  
  
**Docs**

  * [User Manual](/userguide/userguide.html)
  * [DSL Reference](/dsl/)
  * [Release Notes](/release-notes.html)
  * [Javadoc](/javadoc/)

**News**

  * [Blog](https://blog.gradle.org/)
  * [Newsletter](https://newsletter.gradle.com/)
  * [Twitter](https://twitter.com/gradle)
  * [Status Page](https://status.gradle.com/)

**Products**

  * [Build Scans](https://gradle.com/build-scans/)
  * [Build Cache](https://gradle.com/build-cache/)
  * [Enterprise Docs](https://gradle.com/enterprise/resources/)

**Get Help**

  * [Forums](https://discuss.gradle.org/c/help-discuss)
  * [GitHub](https://github.com/gradle/)
  * [Training](https://gradle.com/training/)
  * [Services](https://gradle.org/services/)

##### Stay `UP-TO-DATE` on new features and news

By entering your email, you agree to our
[Terms](https://gradle.com/legal/terms-of-service/) and [Privacy
Policy](https://gradle.com/legal/privacy/), including receipt of emails. You
can unsubscribe at any time.

Subscribe

© [Gradle Inc.](https://gradle.com) 2020 All rights reserved.

[ gradle ](/)

[Careers](https://gradle.com/careers/) |
[Privacy](https://gradle.com/legal/privacy/) | [Terms of
Service](https://gradle.com/legal/terms-of-service/) |
[Contact](https://gradle.org/contact/)

