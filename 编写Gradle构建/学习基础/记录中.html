 无标题 <style id="wiz_custom_css">html, .wiz-editor-body {font-size: 12pt;}.wiz-editor-body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.7;margin: 0 auto;position:relative;padding: 20px 16px;}.wiz-editor-body h1,.wiz-editor-body h2,.wiz-editor-body h3,.wiz-editor-body h4,.wiz-editor-body h5,.wiz-editor-body h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}.wiz-editor-body h1 {font-size:20pt;font-size:1.67rem;}.wiz-editor-body h2 {font-size:18pt;font-size:1.5rem;}.wiz-editor-body h3 {font-size:15pt;font-size:1.25rem;}.wiz-editor-body h4 {font-size:14pt;font-size:1.17rem;}.wiz-editor-body h5 {font-size:12pt;font-size:1rem;}.wiz-editor-body h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}.wiz-editor-body div,.wiz-editor-body p,.wiz-editor-body ul,.wiz-editor-body ol,.wiz-editor-body dl,.wiz-editor-body li {margin:8px 0 0;}.wiz-editor-body blockquote,.wiz-editor-body table,.wiz-editor-body pre,.wiz-editor-body code {margin:8px 0;}.wiz-editor-body .CodeMirror pre {margin:0;}.wiz-editor-body a {word-wrap: break-word;text-decoration-skip-ink: none;}.wiz-editor-body ul,.wiz-editor-body ol {padding-left:32px;padding-left:2rem;}.wiz-editor-body ol.wiz-list-level1 > li {list-style-type:decimal;}.wiz-editor-body ol.wiz-list-level2 > li {list-style-type:lower-latin;}.wiz-editor-body ol.wiz-list-level3 > li {list-style-type:lower-roman;}.wiz-editor-body li.wiz-list-align-style {list-style-position: inside; margin-left: -1em;}.wiz-editor-body blockquote {padding: 0 12px;}.wiz-editor-body blockquote > :first-child {margin-top:0;}.wiz-editor-body blockquote > :last-child {margin-bottom:0;}.wiz-editor-body img {border:0;max-width:100%;height:auto !important;margin:2px 0;padding: 2px;vertical-align:bottom;}.wiz-editor-body table {border-collapse:collapse;border:1px solid #a7afbc;}.wiz-editor-body td,.wiz-editor-body th {padding:4px 8px;border-collapse:collapse;border:1px solid #a7afbc;min-height:28px;word-break:break-word;box-sizing: border-box;}.wiz-editor-body td > div:first-child {margin-top:0;}.wiz-editor-body td > div:last-child {margin-bottom:0;}.wiz-editor-body img.wiz-svg-image {box-shadow:1px 1px 4px #E8E8E8;}.wiz-editor-body .wiz-image-container {margin:0;max-width: 100%;display: inline-flex;flex-direction: column;}.wiz-editor-body .wiz-image-container .wiz-image-title {display:inline-block;text-align: center;color: #a7afbc;line-height: 18px;font-size: 12px;min-height: 18px;width: 100%;white-space: normal;}.wiz-hide {display:none !important;}.wiz-editor-body.wiz-editor-outline {padding-right:0; padding-left:0;}.wiz-editor-body.wiz-editor-outline .outline-container {margin:0; padding:0; line-height:1.5;}.wiz-editor-body.wiz-editor-outline .outline-container div {margin:0;}.wiz-editor-body.wiz-editor-outline .node {margin:0; padding: 0;}.wiz-editor-body.wiz-editor-outline .outline-container > .node {margin-right:24px; margin-left:30px;}.wiz-editor-body.wiz-editor-outline .node.collapsed .children {display:none;}.wiz-editor-body.wiz-editor-outline .node .row {position:relative; padding-left:26px;}.wiz-editor-body.wiz-editor-outline .node .operator-container {width:36px;position:absolute; top:4px; left:-18px;}.wiz-editor-body.wiz-editor-outline .node .operator-bar {position:absolute; top:0; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center;}.wiz-editor-body.wiz-editor-outline .node .switch {width:18px; height:18px;display:flex;flex-direction: column;align-items: center;overflow: hidden;}.wiz-editor-body.wiz-editor-outline .node .switch i {font-size:20px;position:relative;left:-1px;top:-1px;}.wiz-editor-body.wiz-editor-outline .node .switch.active {cursor:pointer;color:transparent; transition:transform 200ms ease 0s;}.wiz-editor-body.wiz-editor-outline .node.collapsed .switch.active {transform:rotateZ(-90deg);}.wiz-editor-body.wiz-editor-outline .node .row:hover .switch.active {color:#505F79}.wiz-editor-body.wiz-editor-outline .node .dot {display:flex; align-items:center; justify-content:center; border-radius:100%; width:18px; height:18px;}.wiz-editor-body.wiz-editor-outline .node.collapsed .dot {background-color:rgba(80, 95, 121, .15);}.wiz-editor-body.wiz-editor-outline .node .dot-icon {background-color:#505F79; border-radius:100%; width:6px; height:6px;}.wiz-editor-body.wiz-editor-outline .node .child {margin-left:8px; border-left:1px solid #E6E9ED; padding-left:17px;}.wiz-editor-body.wiz-editor-outline .node .content {flex:1;outline:none; padding:4px 0;}.wiz-editor-body.wiz-editor-outline .node div.content {font-size:1rem;}.wiz-editor-body.wiz-editor-outline .node.complete > .row .content {text-decoration:line-through;color:#A7AFBC;}.wiz-editor-body.wiz-editor-outline .node .notes {outline:none; font-size:.8rem; color:#A7AFBC;}.wiz-editor-body.wiz-editor-outline .node .image {outline:none; padding-top:4px; padding-bottom:4px;}.wiz-editor-body.wiz-editor-outline .outline-container h1,.wiz-editor-body.wiz-editor-outline .outline-container h2,.wiz-editor-body.wiz-editor-outline .outline-container h3,.wiz-editor-body.wiz-editor-outline .outline-container h4,.wiz-editor-body.wiz-editor-outline .outline-container h5,.wiz-editor-body.wiz-editor-outline .outline-container h6 {margin:0;}body, .wiz-editor-body { padding-left: 48px; padding-right: 48px;}</style><style id="wiz_code_style">.wiz-editor-body .wiz-code-container{position: relative; padding:8px 0; margin: 5px 0;text-indent:0; text-align:left;}.CodeMirror {font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace; color: black; font-size: 10.5pt; font-size: 0.875rem}.wiz-editor-body .wiz-code-container .CodeMirror div {margin-top: 0; margin-bottom: 0;}.CodeMirror-lines {padding: 4px 0;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {padding: 0 4px;}.CodeMirror pre.CodeMirror-line {min-height: 24px;}.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {background-color: white;}.CodeMirror-gutters {border-right: 1px solid #ddd; background-color: #f7f7f7; white-space: nowrap;}.CodeMirror-linenumbers {}.CodeMirror-linenumber {padding: 0 3px 0 5px; min-width: 20px; text-align: right; color: #999; white-space: nowrap;}.CodeMirror-guttermarker {color: black;}.CodeMirror-guttermarker-subtle {color: #999;}.CodeMirror-cursor {border-left: 1px solid black; border-right: none; width: 0;}.CodeMirror div.CodeMirror-secondarycursor {border-left: 1px solid silver;}.cm-fat-cursor .CodeMirror-cursor {width: auto; border: 0 !important; background: #7e7;}.cm-fat-cursor div.CodeMirror-cursors {z-index: 1;}.cm-fat-cursor-mark {background-color: rgba(20, 255, 20, 0.5);-webkit-animation: blink 1.06s steps(1) infinite;-moz-animation: blink 1.06s steps(1) infinite;animation: blink 1.06s steps(1) infinite;}.cm-animate-fat-cursor {width: auto; border: 0; -webkit-animation: blink 1.06s steps(1) infinite; -moz-animation: blink 1.06s steps(1) infinite; animation: blink 1.06s steps(1) infinite; background-color: #7e7;}@-moz-keyframes blink { 0% {} 50% { background-color: transparent; } 100% {}}@-webkit-keyframes blink { 0% {} 50% { background-color: transparent; } 100% {}}@keyframes blink { 0% {} 50% { background-color: transparent; } 100% {}}.CodeMirror-overwrite .CodeMirror-cursor {}.cm-tab { display: inline-block; text-decoration: inherit; }.CodeMirror-rulers {position: absolute; left: 0; right: 0; top: -50px; bottom: -20px; overflow: hidden;}.CodeMirror-ruler {border-left: 1px solid #ccc; top: 0; bottom: 0; position: absolute;}.cm-s-default .cm-header {color: blue;}.cm-s-default .cm-quote {color: #090;}.cm-negative {color: #d44;}.cm-positive {color: #292;}.cm-header, .cm-strong {font-weight: bold;}.cm-em {font-style: italic;}.cm-link {text-decoration: underline;}.cm-strikethrough {text-decoration: line-through;}.cm-s-default .cm-keyword {color: #708;}.cm-s-default .cm-atom {color: #219;}.cm-s-default .cm-number {color: #164;}.cm-s-default .cm-def {color: #00f;}.cm-s-default .cm-variable,.cm-s-default .cm-punctuation,.cm-s-default .cm-property,.cm-s-default .cm-operator {}.cm-s-default .cm-variable-2 {color: #05a;}.cm-s-default .cm-variable-3 {color: #085;}.cm-s-default .cm-comment {color: #a50;}.cm-s-default .cm-string {color: #a11;}.cm-s-default .cm-string-2 {color: #f50;}.cm-s-default .cm-meta {color: #555;}.cm-s-default .cm-qualifier {color: #555;}.cm-s-default .cm-builtin {color: #30a;}.cm-s-default .cm-bracket {color: #997;}.cm-s-default .cm-tag {color: #170;}.cm-s-default .cm-attribute {color: #00c;}.cm-s-default .cm-hr {color: #999;}.cm-s-default .cm-link {color: #00c;}.cm-s-default .cm-error {color: #f00;}.cm-invalidchar {color: #f00;}.CodeMirror-composing { border-bottom: 2px solid; }div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }.CodeMirror-activeline-background {background: #e8f2ff;}.CodeMirror {position: relative; background: #f5f5f5;}.CodeMirror-scroll {overflow: hidden !important; margin-bottom: 0; margin-right: -30px; padding: 16px 30px 16px 0; outline: none; position: relative;}.CodeMirror-sizer {position: relative; border-right: 30px solid transparent;}.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {position: absolute; z-index: 6; display: none;}.CodeMirror-vscrollbar {right: 0; top: 0; overflow-x: hidden; overflow-y: scroll;}.CodeMirror-hscrollbar {bottom: 0; left: 0 !important; overflow-y: hidden; overflow-x: scroll;pointer-events: auto !important;outline: none;}.CodeMirror-scrollbar-filler {right: 0; bottom: 0;}.CodeMirror-gutter-filler {left: 0; bottom: 0;}.CodeMirror-gutters {position: absolute; left: 0; top: 0; min-height: 100%; z-index: 3;}.CodeMirror-gutter {white-space: normal; height: 100%; display: inline-block; vertical-align: top; margin-bottom: -30px;}.CodeMirror-gutter-wrapper {position: absolute; z-index: 4; background: none !important; border: none !important;}.CodeMirror-gutter-background {position: absolute; top: 0; bottom: 0; z-index: 4;}.CodeMirror-gutter-elt {position: absolute; cursor: default; z-index: 4;}.CodeMirror-gutter-wrapper ::selection { background-color: transparent }.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }.CodeMirror-lines {cursor: text; min-height: 1px;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {-moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; border-width: 0; background: transparent; font-family: inherit; font-size: inherit; margin: 0; white-space: pre; word-wrap: normal; line-height: inherit; color: inherit; z-index: 2; position: relative; overflow: visible; -webkit-tap-highlight-color: transparent; -webkit-font-variant-ligatures: contextual; font-variant-ligatures: contextual;}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like {word-wrap: break-word; white-space: pre-wrap; word-break: normal;}.CodeMirror-linebackground {position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: 0;}.CodeMirror-linewidget {position: relative; z-index: 2; padding: 0.1px;}.CodeMirror-widget {}.CodeMirror-rtl pre { direction: rtl; }.CodeMirror-code {outline: none;}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber {-moz-box-sizing: content-box; box-sizing: content-box;}.CodeMirror-measure {position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;}.CodeMirror-cursor {position: absolute; pointer-events: none;}.CodeMirror-measure pre { position: static; }div.CodeMirror-cursors {visibility: hidden; position: relative; z-index: 3;}div.CodeMirror-dragcursors {visibility: visible;}.CodeMirror-focused div.CodeMirror-cursors {visibility: visible;}.CodeMirror-selected { background: #d9d9d9; }.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }.CodeMirror-crosshair { cursor: crosshair; }.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }.cm-searching {background: #ffa; background: rgba(255, 255, 0, .4);}.cm-force-border { padding-right: .1px; }@media print { .CodeMirror div.CodeMirror-cursors {visibility: hidden;}}.cm-tab-wrap-hack:after { content: ""; }span.CodeMirror-selectedtext { background: none; }.CodeMirror-activeline-background, .CodeMirror-selected {transition: visibility 0ms 100ms;}.CodeMirror-blur .CodeMirror-activeline-background, .CodeMirror-blur .CodeMirror-selected {visibility:hidden;}.CodeMirror-blur .CodeMirror-matchingbracket {color:inherit !important;outline:none !important;text-decoration:none !important;}.CodeMirror-sizer {min-height:auto !important;}</style>

# 记录中

内容

* [日志级别](#logLevels)
* [选择日志级别](#sec:choosing_a_log_level)
* [记录敏感信息](#sec:debug_security)
* [编写自己的日志消息](#sec:sending_your_own_log_messages)
* [从外部工具和库记录](#sec:external_tools)
* [更改Gradle日志](#sec:changing_what_gradle_logs)

日志是构建工具的主要“ UI”。如果太冗长，则很容易掩盖真正的警告和问题。另一方面，您需要相关信息来确定是否出错。Gradle定义了6个日志级别，如[Log level](#logLevels)所示。除了通常可能看到的级别以外，还有两种特定于Gradle的日志级别。这些级别是_QUIET_和_LIFECYCLE_。后者是默认设置，用于报告构建进度。

## [](#logLevels)[日志级别](#logLevels)

<table style="background:none;"><tbody><tr style="background:none;"><td class="hdlist1" style="color:rgba(0, 0, 0, 0.8);"><font><font>错误</font></font></td><td class="hdlist2" style="color:rgba(0, 0, 0, 0.8);"><p style="color: rgb(2, 48, 58);"><font><font>错误讯息</font></font></p></td></tr><tr style="background:none;"><td class="hdlist1" style="color:rgba(0, 0, 0, 0.8);"><font><font>安静</font></font></td><td class="hdlist2" style="color:rgba(0, 0, 0, 0.8);"><p style="color: rgb(2, 48, 58);"><font><font>重要信息消息</font></font></p></td></tr><tr style="background:none;"><td class="hdlist1" style="color:rgba(0, 0, 0, 0.8);"><font><font>警告</font></font></td><td class="hdlist2" style="color:rgba(0, 0, 0, 0.8);"><p style="color: rgb(2, 48, 58);"><font><font>警告讯息</font></font></p></td></tr><tr style="background:none;"><td class="hdlist1" style="color:rgba(0, 0, 0, 0.8);"><font><font>生命周期</font></font></td><td class="hdlist2" style="color:rgba(0, 0, 0, 0.8);"><p style="color: rgb(2, 48, 58);"><font><font>进度信息消息</font></font></p></td></tr><tr style="background:none;"><td class="hdlist1" style="color:rgba(0, 0, 0, 0.8);"><font><font>信息</font></font></td><td class="hdlist2" style="color:rgba(0, 0, 0, 0.8);"><p style="color: rgb(2, 48, 58);"><font><font>信息讯息</font></font></p></td></tr><tr style="background:none;"><td class="hdlist1" style="color:rgba(0, 0, 0, 0.8);"><font><font>调试</font></font></td><td class="hdlist2" style="color:rgba(0, 0, 0, 0.8);"><p style="color: rgb(2, 48, 58);"><font><font>调试信息</font></font></p></td></tr></tbody></table>

<table style="background:none;width:912px;"><tbody><tr><td class="icon" style="color:rgba(0, 0, 0, 0.8);width:80px;"><i class="fa icon-note"></i></td><td class="content" style="font-size:1.0625rem;color:rgba(0, 0, 0, 0.6);"><div class="paragraph"><p style="font-size: 1rem;"><font><font>无论使用什么日志级别，都会显示控制台的丰富组件（构建状态和正在进行的工作区域）。</font><font>在Gradle 4.0之前，这些丰富的组件仅在日志级别</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">LIFECYCLE</code><font><font>或更低</font><font>级别显示</font><font>。</font></font></p></div></td></tr></tbody></table>

## [](#sec:choosing_a_log_level)[选择日志级别](#sec:choosing_a_log_level)

您可以使用“[日志级别”命令行选项中](#logLevelCommandLineOptions)显示的命令行开关来选择不同的日志级别。您还可以使用来配置日志级别`gradle.properties`，请参阅[Gradle属性]()。在[Stacktrace命令行选项中，](#stacktraces)您会找到影响stacktrace日志记录的命令行开关。

表1.日志级别的命令行选项
| 选项 | 输出日志级别 |
| --- | --- |
| 
没有记录选项

 | 

生命周期及更高

 |
| 

`-q`要么`--quiet`

 | 

安静及更高

 |
| 

`-w`要么`--warn`

 | 

警告及更高

 |
| 

`-i`要么`--info`

 | 

INFO及更高

 |
| 

`-d`要么`--debug`

 | 

DEBUG及更高版本（即所有日志消息）

 |

<table style="background:none;width:912px;"><tbody><tr><td class="icon" style="color:rgba(0, 0, 0, 0.8);width:80px;"><i class="fa icon-caution"></i></td><td class="content" style="font-size:1.0625rem;color:rgba(0, 0, 0, 0.6);"><div class="paragraph"><p style="font-size: 1rem;"><font><font>该</font></font><code style="font-family:Inconsolata, monospace;font-size:0.9375rem;color:rgba(0, 0, 0, 0.9);background-color:rgb(247, 247, 248);">DEBUG</code><font><font>日志级别可以</font></font><a href="#sec:debug_security" style="color:rgb(29, 162, 189);text-decoration:none;"><font><font>暴露的安全敏感信息到控制台</font></font></a><font><font>。</font></font></p></div></td></tr></tbody></table>

### [](#stacktraces)[Stacktrace命令行选项](#stacktraces)

`-s`要么`--stacktrace`

打印出截断的堆栈跟踪。我们建议在整个堆栈跟踪中使用此方法。Groovy的全踪迹非常详细（由于底层的动态调用机制。然而，他们通常不包含什么有出了错相关信息_您的_代码。）此选项使得踪迹弃用警告。

`-S`要么`--full-stacktrace`

完整的堆栈跟踪信息将被打印出来。此选项为过时警告呈现堆栈跟踪。

\<无堆栈跟踪选项>

如果发生构建错误（例如，编译错误），则不会将任何堆栈跟踪记录打印到控制台。仅在内部异常的情况下，才会打印堆栈跟踪。如果`DEBUG`选择了日志级别，则始终会打印出截断的堆栈跟踪。

## [](#sec:debug_security)[记录敏感信息](#sec:debug_security)

以`DEBUG`日志级别运行Gradle可以向控制台公开安全敏感信息并生成日志。

此信息可以包括但不限于：

* 环境变量
* 专用存储库凭证
* 建立缓存和Gradle企业凭证
* [插件门户](https://plugins.gradle.org/)发布凭证

调试日志级别应该**不会**对公众持续集成服务运行时使用。公共持续集成服务的构建日志在世界范围内可见，并且可以公开此敏感信息。根据组织的威胁模型，在私有CI中记录敏感凭据也可能是一个漏洞。请与您组织的安全团队讨论此问题。

一些配置项提供程序尝试从日志中清除敏感的凭证。但是，这将是不完善的，并且通常仅清除预先配置的机密的完全匹配项。

如果您认为Gradle插件可能会公开敏感信息，请联系[security\@gradle.com](mailto:security@gradle.com)以获取公开帮助。

## [](#sec:sending_your_own_log_messages)[编写自己的日志消息](#sec:sending_your_own_log_messages)

登录构建文件的一个简单选项是将消息写入标准输出。Gradle在`QUIET`日志级别将写入标准输出的所有内容重定向到其日志记录系统。

示例1.使用stdout编写日志消息

`Groovy``Kotlin`

build.gradle

println 'A message which is logged at QUIET level'

 

1

println 'A message which is logged at QUIET level'

Gradle还为`logger`构建脚本提供了一个属性，该脚本是[Logger]()的实例。该接口扩展了SLF4J`Logger`接口，并向其中添加了一些Gradle特定的方法。以下是在构建脚本中如何使用它的示例：

例子2.编写自己的日志消息

`Groovy``Kotlin`

build.gradle

logger.quiet\('An info log message which is always logged.'\) logger.error\('An error log message.'\) logger.warn\('A warning log message.'\) logger.lifecycle\('A lifecycle info log message.'\) logger.info\('An info log message.'\) logger.debug\('A debug log message.'\) logger.trace\('A trace log message.'\) // Gradle never logs TRACE level logs

 

1

logger.quiet\('An info log message which is always logged.'\)

2

logger.error\('An error log message.'\)

3

logger.warn\('A warning log message.'\)

4

logger.lifecycle\('A lifecycle info log message.'\)

5

logger.info\('An info log message.'\)

6

logger.debug\('A debug log message.'\)

7

logger.trace\('A trace log message.'\) // Gradle never logs TRACE level logs

使用[典型的SLF4J模式](https://www.slf4j.org/manual.html#typical_usage)将占位符替换为实际值，作为日志消息的一部分。

例子3.用占位符写一条日志消息

`Groovy``Kotlin`

build.gradle

logger.info\('A \{\} log message', 'info'\)

 

1

logger.info\('A \{\} log message', 'info'\)

您还可以从构建中使用的其他类（`buildSrc`例如，目录中的类）中插入Gradle的日志系统。只需使用SLF4J记录器。您可以使用与在构建脚本中使用提供的记录器相同的方式来使用此记录器。

例子4.使用SLF4J写入日志消息

`Groovy``Kotlin`

build.gradle

import org.slf4j.LoggerFactory def slf4jLogger = LoggerFactory.getLogger\('some-logger'\) slf4jLogger.info\('An info log message logged using SLF4j'\)

 

1

import org.slf4j.LoggerFactory

2

3

def slf4jLogger \= LoggerFactory.getLogger\('some-logger'\)

4

slf4jLogger.info\('An info log message logged using SLF4j'\)

## [](#sec:external_tools)[从外部工具和库记录](#sec:external_tools)

在内部，Gradle使用Ant和Ivy。两者都有自己的日志系统。Gradle将其日志输出重定向到Gradle日志系统。从Ant / Ivy日志级别到Gradle日志级别有1：1映射，但Ant / Ivy日志级别除外`TRACE`，后者已映射到Gradle`DEBUG`日志级别。这意味着默认的Gradle日志级别将不会显示任何Ant / Ivy输出，除非它是错误或警告。

有许多工具仍然使用标准输出进行日志记录。默认情况下，Gradle将标准输出重定向到`QUIET`日志级别，并将标准错误重定向到该`ERROR`级别。此行为是可配置的。项目对象提供一个[LoggingManager]()，它允许您更改在评估构建脚本时将标准输出或错误重定向到的日志级别。

例子5.配置标准输出捕获

`Groovy``Kotlin`

build.gradle

logging.captureStandardOutput LogLevel.INFO println 'A message which is logged at INFO level'

 

1

logging.captureStandardOutput LogLevel.INFO

2

println 'A message which is logged at INFO level'

为了在任务执行期间更改标准输出或错误的日志级别，任务还提供了[LoggingManager]()。

例子6.为任务配置标准输出捕获

`Groovy``Kotlin`

build.gradle

task logInfo \{ logging.captureStandardOutput LogLevel.INFO doFirst \{ println 'A task message which is logged at INFO level' \} \}

 

1

task logInfo \{

2

 logging.captureStandardOutput LogLevel.INFO

3

 doFirst \{

4

 println 'A task message which is logged at INFO level'

5

 \}

6

\}

Gradle还提供与Java Util Logging，Jakarta Commons Logging和Log4j日志记录工具包的集成。您的构建类使用这些日志记录工具包编写的任何日志消息都将被重定向到Gradle的日志记录系统。

## [](#sec:changing_what_gradle_logs)[更改Gradle日志](#sec:changing_what_gradle_logs)

您可以用自己的Gradle替换许多Logging UI。例如，如果您想以某种方式自定义UI，则可以执行此操作-记录更多或更少的信息，或更改格式。您可以使用[Gradle.useLogger（java.lang.Object）]()方法替换日志记录。可通过构建脚本或初始化脚本或通过嵌入API进行访问。请注意，这完全禁用了Gradle的默认输出。下面是一个示例初始化脚本，该脚本更改了记录任务执行和构建完成的方式。

例子7.自定义Gradle日志

`Groovy``Kotlin`

customLogger.init.gradle

useLogger\(new CustomEventLogger\(\)\) class CustomEventLogger extends BuildAdapter implements TaskExecutionListener \{ void beforeExecute\(Task task\) \{ println "\[\$task.name\]" \} void afterExecute\(Task task, TaskState state\) \{ println\(\) \} void buildFinished\(BuildResult result\) \{ println 'build completed' if \(result.failure \!= null\) \{ result.failure.printStackTrace\(\) \} \} \}

 

1

useLogger\(new CustomEventLogger\(\)\)

2

3

class CustomEventLogger extends BuildAdapter implements TaskExecutionListener \{

4

5

 void beforeExecute\(Task task\) \{

6

 println "\[\$task.name\]"

7

 \}

8

9

 void afterExecute\(Task task, TaskState state\) \{

10

 println\(\)

11

 \}

12

13

 void buildFinished\(BuildResult result\) \{

14

 println 'build completed'

15

 if \(result.failure \!= null\) \{

16

 result.failure.printStackTrace\(\)

17

 \}

18

 \}

19

\}

\$ gradle -I customLogger.init.gradle构建
 >任务：编译 \[编译\] 编译源
 >任务：testCompile \[testCompile\] 编译测试源
 >任务：测试 \[测试\] 运行单元测试
 >任务：构建 \[建立\]
 构建完成 3个可执行的任务：3个已执行

您的记录器可以实现下面列出的任何侦听器接口。注册记录器时，只会替换其实现的接口的记录。其他接口的日志保持不变。您可以在“[构建生命周期”事件中]()找到有关侦听器接口的更多信息。

* [BuildListener]()
* [ProjectEvaluationListener]()
* [TaskExecutionGraphListener]()
* [TaskExecutionListener]()
* [TaskActionListener]()